# ç”¢å“éœ€æ±‚æ–‡ä»¶ï¼ˆPRDï¼‰
# LINE å®¢æˆ¶è¨Šæ¯æ”¶é›†ç³»çµ±

**æ–‡ä»¶ç‰ˆæœ¬**: 1.0
**æœ€å¾Œæ›´æ–°æ—¥æœŸ**: 2025-11-05
**æ–‡ä»¶æ“æœ‰è€…**: ç”¢å“åœ˜éšŠ
**ç‹€æ…‹**: å·²å¯¦ä½œ

---

## ç›®éŒ„

1. [ç”¢å“æ¦‚è¿°](#1-ç”¢å“æ¦‚è¿°)
2. [ç”¢å“ç›®æ¨™èˆ‡é¡˜æ™¯](#2-ç”¢å“ç›®æ¨™èˆ‡é¡˜æ™¯)
3. [ç›®æ¨™ç”¨æˆ¶](#3-ç›®æ¨™ç”¨æˆ¶)
4. [ä½¿ç”¨å ´æ™¯](#4-ä½¿ç”¨å ´æ™¯)
5. [åŠŸèƒ½éœ€æ±‚](#5-åŠŸèƒ½éœ€æ±‚)
6. [éåŠŸèƒ½éœ€æ±‚](#6-éåŠŸèƒ½éœ€æ±‚)
7. [æŠ€è¡“æ¶æ§‹](#7-æŠ€è¡“æ¶æ§‹)
8. [è³‡æ–™çµæ§‹](#8-è³‡æ–™çµæ§‹)
9. [ç”¨æˆ¶ä»‹é¢](#9-ç”¨æˆ¶ä»‹é¢)
10. [ç³»çµ±é™åˆ¶](#10-ç³»çµ±é™åˆ¶)
11. [æ•´åˆèˆ‡ä¾è³´](#11-æ•´åˆèˆ‡ä¾è³´)
12. [éƒ¨ç½²æ¶æ§‹](#12-éƒ¨ç½²æ¶æ§‹)
13. [æˆåŠŸæŒ‡æ¨™](#13-æˆåŠŸæŒ‡æ¨™)
14. [æœªä¾†è¦åŠƒ](#14-æœªä¾†è¦åŠƒ)
15. [é¢¨éšªèˆ‡æŒ‘æˆ°](#15-é¢¨éšªèˆ‡æŒ‘æˆ°)

---

## 1. ç”¢å“æ¦‚è¿°

### 1.1 ç”¢å“ç°¡ä»‹

LINE å®¢æˆ¶è¨Šæ¯æ”¶é›†ç³»çµ±æ˜¯ä¸€å€‹åŸºæ–¼ LINE Messaging API çš„ Webhook æœå‹™ï¼Œå°ˆé–€è¨­è¨ˆç”¨æ–¼å°å‹ä¼æ¥­å’Œå€‹äººå·¥ä½œå®¤æ”¶é›†ã€å„²å­˜å’Œç®¡ç†ä¾†è‡ª LINE å®¢æˆ¶çš„è¨Šæ¯ã€‚ç³»çµ±è‡ªå‹•æ¥æ”¶å®¢æˆ¶é€é LINE Bot ç™¼é€çš„æ–‡å­—ã€åœ–ç‰‡ã€æª”æ¡ˆç­‰å¤šç¨®é¡å‹è¨Šæ¯ï¼Œä¸¦æä¾›å®Œå–„çš„æŸ¥è©¢ä»‹é¢å’Œè³‡æ–™åŒ¯å‡ºåŠŸèƒ½ã€‚

### 1.2 ç”¢å“åƒ¹å€¼

**è§£æ±ºçš„å•é¡Œ**:
- LINE å®˜æ–¹å¾Œå°ç„¡æ³•é•·æœŸä¿å­˜å®¢æˆ¶è¨Šæ¯
- ç„¡æ³•æœ‰æ•ˆæ•´ç†å’Œæœå°‹æ­·å²å®¢æˆ¶è³‡æ–™
- é›£ä»¥å»ºç«‹å®Œæ•´çš„å®¢æˆ¶è³‡æ–™æª”æ¡ˆ
- ç¼ºä¹çµ±ä¸€çš„å®¢æˆ¶è¨Šæ¯ç®¡ç†ä»‹é¢
- å®¢æˆ¶å§“åç®¡ç†ä¸ä¾¿ï¼ˆLINE API é™åˆ¶ï¼‰

**æä¾›çš„åƒ¹å€¼**:
- æ°¸ä¹…ä¿å­˜å®¢æˆ¶è¨Šæ¯è¨˜éŒ„
- è‡ªå‹•æ”¶é›†å®¢æˆ¶è³‡æ–™ï¼ˆLINE Profile è³‡æ–™ï¼‰
- è‡ªå‹•è¨˜éŒ„ç¾¤çµ„åç¨±ï¼ˆç”¨æ–¼å®¢æˆ¶è­˜åˆ¥ï¼‰
- æä¾›å¤šç¨®æ ¼å¼è³‡æ–™åŒ¯å‡º
- å»ºç«‹ç¨ç«‹çš„å®¢æˆ¶å§“åç®¡ç†ç³»çµ±
- å‹å–„çš„ç¶²é æŸ¥è©¢ä»‹é¢

### 1.3 ç”¢å“å®šä½

**ç”¢å“é¡å‹**: SaaS å·¥å…· / CRM è¼”åŠ©ç³»çµ±
**éƒ¨ç½²æ¨¡å¼**: é›²ç«¯æœå‹™ï¼ˆRender.comï¼‰
**å•†æ¥­æ¨¡å¼**: æ¸¬è©¦/å…è²»ç‰ˆæœ¬ï¼ˆæœ‰è³‡æ–™é‡é™åˆ¶ï¼‰
**è¦æ¨¡**: å°å‹ä¼æ¥­ã€å€‹äººå·¥ä½œå®¤ã€ç¤¾ç¾¤ç¶“ç‡Ÿè€…

---

## 2. ç”¢å“ç›®æ¨™èˆ‡é¡˜æ™¯

### 2.1 çŸ­æœŸç›®æ¨™ï¼ˆå·²å¯¦ä½œï¼‰

1. âœ… ç©©å®šæ¥æ”¶ä¸¦å„²å­˜æ‰€æœ‰é¡å‹çš„ LINE è¨Šæ¯
2. âœ… è‡ªå‹•æ”¶é›†å®¢æˆ¶åŸºæœ¬è³‡æ–™ï¼ˆLINE Profile APIï¼‰
3. âœ… è‡ªå‹•è¨˜éŒ„ç¾¤çµ„åç¨±ï¼ˆLINE Bot APIï¼‰
4. âœ… æä¾›å‹å–„çš„ç¶²é æŸ¥è©¢ä»‹é¢
5. âœ… å¯¦ä½œå¤šç¨®è³‡æ–™åŒ¯å‡ºæ ¼å¼
6. âœ… å»ºç«‹å®¢æˆ¶å§“åç®¡ç†ç³»çµ±
7. âœ… å¯¦ä½œç³»çµ±è³‡æ–™é‡é™åˆ¶æ©Ÿåˆ¶

### 2.2 ä¸­æœŸç›®æ¨™ï¼ˆæœªä¾† 3-6 å€‹æœˆï¼‰

1. ğŸ”„ å„ªåŒ–æœå°‹åŠŸèƒ½ï¼ˆå¾Œç«¯å¯¦ä½œï¼Œæ”¯æ´å¤§é‡è³‡æ–™ï¼‰
2. ğŸ”„ å¢åŠ è¨Šæ¯æ¨™ç±¤å’Œåˆ†é¡åŠŸèƒ½
3. ğŸ”„ å¯¦ä½œå®¢æˆ¶åˆ†ç¾¤å’Œæ¨™ç±¤ç³»çµ±
4. ğŸ”„ å¢åŠ è¨Šæ¯è‡ªå‹•å›è¦†è¦å‰‡
5. ğŸ”„ æä¾›ç°¡æ˜“çš„çµ±è¨ˆåœ–è¡¨
6. ğŸ”„ æ”¯æ´å¤šå€‹ LINE Bot å¸³è™Ÿç®¡ç†

### 2.3 é•·æœŸé¡˜æ™¯

æ‰“é€ ä¸€å€‹è¼•é‡ç´šä½†åŠŸèƒ½å®Œæ•´çš„ LINE å®¢æˆ¶é—œä¿‚ç®¡ç†ç³»çµ±ï¼Œå¹«åŠ©å°å‹ä¼æ¥­å’Œå‰µæ¥­è€…ï¼š
- æœ‰æ•ˆç®¡ç†å®¢æˆ¶é—œä¿‚
- æå‡å®¢æˆ¶æœå‹™å“è³ª
- å»ºç«‹å®Œæ•´çš„å®¢æˆ¶è³‡æ–™åº«
- åˆ†æå®¢æˆ¶è¡Œç‚ºå’Œéœ€æ±‚
- è‡ªå‹•åŒ–éƒ¨åˆ†å®¢æœæµç¨‹

---

## 3. ç›®æ¨™ç”¨æˆ¶

### 3.1 ä¸»è¦ç”¨æˆ¶ç¾¤é«”

#### ç”¨æˆ¶ç¾¤ Aï¼šå°å‹é›»å•†ç¶“ç‡Ÿè€…
- **ç‰¹å¾µ**: é€é LINE æ¥æ”¶å®¢æˆ¶è¨‚å–®å’Œè©¢å•
- **éœ€æ±‚**: ä¿å­˜è¨‚å–®è¨˜éŒ„ã€ç®¡ç†å®¢æˆ¶è³‡æ–™ã€æŸ¥è©¢æ­·å²è¨Šæ¯
- **ç—›é»**: LINE èŠå¤©è¨˜éŒ„é›£ä»¥æ•´ç†ã€ç„¡æ³•é•·æœŸä¿å­˜ã€æœå°‹å›°é›£
- **é æœŸåƒ¹å€¼**: å»ºç«‹è¨‚å–®è³‡æ–™åº«ã€å¿«é€ŸæŸ¥è©¢å®¢æˆ¶æ­·å²è¨˜éŒ„

#### ç”¨æˆ¶ç¾¤ Bï¼šå€‹äººå·¥ä½œå®¤/æ¥æ¡ˆè€…
- **ç‰¹å¾µ**: ä½¿ç”¨ LINE èˆ‡å®¢æˆ¶æºé€šå°ˆæ¡ˆç´°ç¯€
- **éœ€æ±‚**: è¨˜éŒ„å®¢æˆ¶éœ€æ±‚ã€ä¿å­˜æª”æ¡ˆç´ æã€è¿½è¹¤å°ˆæ¡ˆé€²åº¦
- **ç—›é»**: å¤šå€‹å®¢æˆ¶ç¾¤çµ„ç®¡ç†æ··äº‚ã€æª”æ¡ˆæ•£è½å„è™•
- **é æœŸåƒ¹å€¼**: é›†ä¸­ç®¡ç†æ‰€æœ‰å®¢æˆ¶è³‡æ–™ã€å¿«é€Ÿæ‰¾åˆ°æ­·å²ç´ æ

#### ç”¨æˆ¶ç¾¤ Cï¼šç¤¾ç¾¤ç¶“ç‡Ÿè€…
- **ç‰¹å¾µ**: ç®¡ç† LINE ç¤¾ç¾¤æˆ–å¤šå€‹ç¾¤çµ„
- **éœ€æ±‚**: æ”¶é›†æˆå“¡å›é¥‹ã€ä¿å­˜é‡è¦å…¬å‘Šã€çµ±è¨ˆåƒèˆ‡åº¦
- **ç—›é»**: ç„¡æ³•çµ±è¨ˆæˆå“¡äº’å‹•ã€é‡è¦è¨Šæ¯å®¹æ˜“éºå¤±
- **é æœŸåƒ¹å€¼**: å®Œæ•´è¨˜éŒ„ç¤¾ç¾¤æ´»å‹•ã€åˆ†ææˆå“¡åƒèˆ‡åº¦

#### ç”¨æˆ¶ç¾¤ Dï¼šå®¢æœäººå“¡
- **ç‰¹å¾µ**: ä½¿ç”¨ LINE æä¾›å®¢æˆ¶æœå‹™
- **éœ€æ±‚**: æŸ¥è©¢å®¢æˆ¶éå¾€è¨˜éŒ„ã€å¿«é€Ÿå›æ‡‰é‡è¤‡å•é¡Œ
- **ç—›é»**: ç„¡æ³•å¿«é€Ÿæ‰¾åˆ°å®¢æˆ¶æ­·å²è³‡æ–™ã€é‡è¤‡å•é¡Œæ•ˆç‡ä½
- **é æœŸåƒ¹å€¼**: æå‡å®¢æœæ•ˆç‡ã€æ”¹å–„å®¢æˆ¶é«”é©—

### 3.2 ç”¨æˆ¶æŠ€èƒ½éœ€æ±‚

- **åŸºç¤**: æœƒä½¿ç”¨ LINEã€åŸºæœ¬é›»è…¦æ“ä½œèƒ½åŠ›
- **é€²éš**: ç†è§£åŸºæœ¬çš„ç¶²é ä»‹é¢æ“ä½œ
- **æŠ€è¡“**: ç„¡éœ€ç·¨ç¨‹æŠ€èƒ½ï¼ˆç®¡ç†å“¡éœ€è¦åŸºæœ¬çš„ä¼ºæœå™¨éƒ¨ç½²çŸ¥è­˜ï¼‰

---

## 4. ä½¿ç”¨å ´æ™¯

### å ´æ™¯ 1ï¼šæ¥æ”¶æ–°å®¢æˆ¶è¨‚å–®

**ç”¨æˆ¶æ•…äº‹**:
ä½œç‚ºä¸€å€‹ç¶²æ‹è³£å®¶ï¼Œæˆ‘å¸Œæœ›ç³»çµ±è‡ªå‹•è¨˜éŒ„å®¢æˆ¶é€é LINE ç™¼é€çš„è¨‚å–®è¨Šæ¯å’Œå•†å“åœ–ç‰‡ï¼Œä»¥ä¾¿æˆ‘å¯ä»¥éš¨æ™‚æŸ¥è©¢å®¢æˆ¶çš„è¨‚è³¼è¨˜éŒ„ã€‚

**æµç¨‹**:
1. å®¢æˆ¶é€é LINE ç™¼é€è¨‚å–®è¨Šæ¯å’Œå•†å“åœ–ç‰‡
2. ç³»çµ±è‡ªå‹•æ¥æ”¶ä¸¦å„²å­˜è¨Šæ¯åˆ°è³‡æ–™åº«
3. ç³»çµ±è‡ªå‹•ç²å–å®¢æˆ¶ LINE è³‡æ–™ï¼ˆåç¨±ã€é ­åƒï¼‰
4. è‹¥ä¾†è‡ªç¾¤çµ„ï¼Œç³»çµ±è‡ªå‹•è¨˜éŒ„ç¾¤çµ„åç¨±
5. åœ–ç‰‡æª”æ¡ˆä¸Šå‚³è‡³ Supabase Storage
6. è³£å®¶å¯ä»¥åœ¨ç¶²é ä»‹é¢æŸ¥è©¢è©²å®¢æˆ¶çš„æ‰€æœ‰è¨Šæ¯

**æˆåŠŸæ¨™æº–**:
- è¨Šæ¯æ¥æ”¶æˆåŠŸç‡ > 99%
- æª”æ¡ˆä¸Šå‚³æˆåŠŸç‡ > 98%
- æŸ¥è©¢éŸ¿æ‡‰æ™‚é–“ < 2 ç§’

### å ´æ™¯ 2ï¼šè¨­å®šå®¢æˆ¶çœŸå¯¦å§“å

**ç”¨æˆ¶æ•…äº‹**:
ä½œç‚ºå®¢æœäººå“¡ï¼Œæˆ‘å¸Œæœ›èƒ½å¤ ç‚ºæ¯å€‹ LINE å®¢æˆ¶è¨­å®šçœŸå¯¦å§“åï¼Œå› ç‚º LINE é¡¯ç¤ºåç¨±å¯èƒ½ä¸æ˜¯å®¢æˆ¶çš„çœŸå¯¦å§“åï¼Œé€™æœƒå½±éŸ¿å¾ŒçºŒç®¡ç†å’Œæºé€šã€‚

**æµç¨‹**:
1. å®¢æœé–‹å•Ÿã€Œå®¢æˆ¶å§“åç®¡ç†ã€ä»‹é¢
2. ç³»çµ±é¡¯ç¤ºæ‰€æœ‰éœ€è¦è¨­å®šå§“åçš„å®¢æˆ¶åˆ—è¡¨
3. ç³»çµ±å±•ç¤ºè©²å®¢æˆ¶çš„æœ€è¿‘ 3 å‰‡è¨Šæ¯ä½œç‚ºåƒè€ƒ
4. å®¢æœæŸ¥çœ‹è¨Šæ¯å…§å®¹ï¼Œè­˜åˆ¥å®¢æˆ¶çœŸå¯¦å§“å
5. è¼¸å…¥å®¢æˆ¶çœŸå¯¦å§“åä¸¦å„²å­˜
6. ç³»çµ±æ›´æ–°è³‡æ–™åº«ä¸¦é¡¯ç¤ºæˆåŠŸé€šçŸ¥
7. å¾ŒçºŒæŸ¥è©¢å’ŒåŒ¯å‡ºéƒ½æœƒé¡¯ç¤ºçœŸå¯¦å§“å

**æˆåŠŸæ¨™æº–**:
- æ“ä½œä»‹é¢ç°¡æ½”æ˜“ç”¨
- è¨Šæ¯åƒè€ƒè³‡è¨Šå……è¶³
- æ‰¹é‡æ›´æ–°åŠŸèƒ½æ­£å¸¸
- æ”¯æ´ CSV åŒ¯å…¥/åŒ¯å‡º

### å ´æ™¯ 3ï¼šæŸ¥è©¢æ­·å²å®¢æˆ¶è³‡æ–™

**ç”¨æˆ¶æ•…äº‹**:
ä½œç‚ºæ¥­å‹™äººå“¡ï¼Œæˆ‘å¸Œæœ›èƒ½å¤ å¿«é€Ÿæœå°‹ç‰¹å®šå®¢æˆ¶çš„æ‰€æœ‰æ­·å²è¨Šæ¯å’Œæª”æ¡ˆï¼Œä»¥ä¾¿ç­è§£éå¾€äº’å‹•è¨˜éŒ„ã€‚

**æµç¨‹**:
1. ä½¿ç”¨è€…é–‹å•Ÿè¨Šæ¯æŸ¥è©¢ä»‹é¢
2. åœ¨æœå°‹æ¬„è¼¸å…¥å®¢æˆ¶å§“åæˆ–é—œéµå­—
3. ç³»çµ±å³æ™‚é¡¯ç¤ºç¬¦åˆæ¢ä»¶çš„è¨Šæ¯
4. ä½¿ç”¨è€…å¯ä»¥æŸ¥çœ‹è¨Šæ¯å…§å®¹ã€ä¸‹è¼‰æª”æ¡ˆ
5. å¯ä»¥ä¾ç”¨æˆ¶ç¯©é¸ï¼ŒæŸ¥çœ‹ç‰¹å®šå®¢æˆ¶çš„æ‰€æœ‰è¨˜éŒ„

**æˆåŠŸæ¨™æº–**:
- æœå°‹çµæœæº–ç¢º
- éŸ¿æ‡‰æ™‚é–“ < 3 ç§’
- æ”¯æ´æ¨¡ç³Šæœå°‹
- é¡¯ç¤ºè¨Šæ¯å®Œæ•´è³‡è¨Š

### å ´æ™¯ 4ï¼šåŒ¯å‡ºè³‡æ–™é€²è¡Œåˆ†æ

**ç”¨æˆ¶æ•…äº‹**:
ä½œç‚ºç®¡ç†è€…ï¼Œæˆ‘å¸Œæœ›èƒ½å¤ åŒ¯å‡ºæ‰€æœ‰å®¢æˆ¶è¨Šæ¯è³‡æ–™ç‚º Excel æˆ– CSV æ ¼å¼ï¼Œä»¥ä¾¿é€²è¡Œé€²ä¸€æ­¥çš„è³‡æ–™åˆ†æå’Œå ±è¡¨è£½ä½œã€‚

**æµç¨‹**:
1. ä½¿ç”¨è€…é»æ“Šã€ŒåŒ¯å‡ºè³‡æ–™ã€æŒ‰éˆ•
2. é¸æ“‡åŒ¯å‡ºæ ¼å¼ï¼ˆCSV / Excel / JSON / PDF / ZIPï¼‰
3. ç³»çµ±ç”ŸæˆåŒ¯å‡ºæª”æ¡ˆ
4. ä½¿ç”¨è€…ä¸‹è¼‰æª”æ¡ˆ
5. ä½¿ç”¨ Excel æˆ–å…¶ä»–å·¥å…·é€²è¡Œåˆ†æ

**æˆåŠŸæ¨™æº–**:
- åŒ¯å‡ºæˆåŠŸç‡ > 98%
- ç”Ÿæˆæ™‚é–“ < 30 ç§’ï¼ˆ1000 å‰‡è¨Šæ¯ï¼‰
- è³‡æ–™å®Œæ•´æ€§ 100%
- æ ¼å¼æ­£ç¢ºç„¡éŒ¯èª¤

### å ´æ™¯ 5ï¼šç›£æ§ç³»çµ±ä½¿ç”¨ç‹€æ…‹

**ç”¨æˆ¶æ•…äº‹**:
ä½œç‚ºç³»çµ±ç®¡ç†å“¡ï¼Œæˆ‘å¸Œæœ›èƒ½å¤ å³æ™‚æŸ¥çœ‹ç³»çµ±çµ±è¨ˆè³‡è¨Šï¼ˆè¨Šæ¯æ•¸é‡ã€ç”¨æˆ¶æ•¸é‡ã€å„²å­˜ç©ºé–“ä½¿ç”¨æƒ…æ³ï¼‰ï¼Œä»¥ä¾¿æŒæ¡ç³»çµ±ç‹€æ…‹ã€‚

**æµç¨‹**:
1. ç®¡ç†å“¡é–‹å•ŸæŸ¥è©¢ä»‹é¢
2. å„€è¡¨æ¿è‡ªå‹•é¡¯ç¤ºçµ±è¨ˆè³‡è¨Š
3. æŸ¥çœ‹è¨Šæ¯æ•¸é‡ã€ç”¨æˆ¶æ•¸é‡ã€æª”æ¡ˆæ•¸é‡
4. æŸ¥çœ‹æ˜¯å¦æ¥è¿‘é™åˆ¶ï¼ˆ90% è­¦å‘Šï¼‰
5. æ±ºå®šæ˜¯å¦éœ€è¦å‡ç´šæ–¹æ¡ˆæˆ–æ¸…ç†è³‡æ–™

**æˆåŠŸæ¨™æº–**:
- çµ±è¨ˆè³‡æ–™å³æ™‚æ›´æ–°ï¼ˆè‡ªå‹• 30 ç§’åˆ·æ–°ï¼‰
- é” 90% é™åˆ¶æ™‚é¡¯ç¤ºç´…è‰²è­¦å‘Š
- é¡¯ç¤ºè³‡è¨Šæº–ç¢ºç„¡èª¤

---

## 5. åŠŸèƒ½éœ€æ±‚

### 5.1 æ ¸å¿ƒåŠŸèƒ½æ¨¡çµ„

#### åŠŸèƒ½æ¨¡çµ„ 1ï¼šè¨Šæ¯æ¥æ”¶èˆ‡è™•ç†

**å„ªå…ˆç´š**: P0ï¼ˆå¿…é ˆæœ‰ï¼‰
**ç‹€æ…‹**: âœ… å·²å¯¦ä½œ

**åŠŸèƒ½æè¿°**:
è‡ªå‹•æ¥æ”¶ä¾†è‡ª LINE Webhook çš„æ‰€æœ‰é¡å‹è¨Šæ¯ï¼ŒåŒ…æ‹¬æ–‡å­—ã€åœ–ç‰‡ã€æª”æ¡ˆã€éŸ³è¨Šã€è¦–è¨Šç­‰ï¼Œä¸¦å„²å­˜è‡³è³‡æ–™åº«ã€‚

**åŠŸèƒ½ç´°ç¯€**:

1. **Webhook æ¥æ”¶ç«¯é»** (`POST /webhook`)
   - æ¥æ”¶ LINE å¹³å°æ¨é€çš„äº‹ä»¶
   - é©—è­‰è«‹æ±‚ä¾†æºï¼ˆLINE Signatureï¼‰
   - è§£æäº‹ä»¶é¡å‹å’Œå…§å®¹
   - æ”¯æ´æ‰¹æ¬¡äº‹ä»¶è™•ç†

2. **è¨Šæ¯é¡å‹è™•ç†**
   - âœ… æ–‡å­—è¨Šæ¯ï¼ˆtextï¼‰
   - âœ… åœ–ç‰‡è¨Šæ¯ï¼ˆimageï¼‰- è‡ªå‹•ä¸‹è¼‰ä¸¦ä¸Šå‚³è‡³ Storage
   - âœ… æª”æ¡ˆè¨Šæ¯ï¼ˆfileï¼‰- æ”¯æ´ PDFã€Wordã€Excel ç­‰
   - âœ… éŸ³è¨Šè¨Šæ¯ï¼ˆaudioï¼‰
   - âœ… è¦–è¨Šè¨Šæ¯ï¼ˆvideoï¼‰
   - âš ï¸ ä½ç½®è¨Šæ¯ï¼ˆlocationï¼‰- æœªå¯¦ä½œ
   - âš ï¸ è²¼åœ–è¨Šæ¯ï¼ˆstickerï¼‰- æœªå¯¦ä½œ

3. **æª”æ¡ˆè™•ç†æµç¨‹**
   - ä½¿ç”¨ LINE Bot SDK `getMessageContent()` ä¸‹è¼‰æª”æ¡ˆ
   - é©—è­‰æª”æ¡ˆå¤§å°ï¼ˆ< 50MBï¼‰
   - åˆ¤æ–·æª”æ¡ˆé¡å‹ï¼ˆMIME typeï¼‰
   - ç”Ÿæˆå”¯ä¸€æª”åï¼ˆæ™‚é–“æˆ³ + åŸæª”åï¼‰
   - ä¾æª”æ¡ˆé¡å‹åˆ†é¡å„²å­˜ï¼ˆimages/audio/video/documentsï¼‰
   - ä¸Šå‚³è‡³ Supabase Storage
   - è¨˜éŒ„æª”æ¡ˆè·¯å¾‘å’Œ metadata

4. **è¨Šæ¯å„²å­˜**
   - å„²å­˜è‡³ `messages` è¡¨
   - è¨˜éŒ„è¨Šæ¯ IDã€ç”¨æˆ¶ IDã€é¡å‹ã€å…§å®¹ã€æ™‚é–“æˆ³
   - é—œè¯æª”æ¡ˆè³‡è¨Šï¼ˆå¦‚æœ‰ï¼‰
   - æ›´æ–°ç”¨æˆ¶æœ€å¾Œè¨Šæ¯æ™‚é–“
   - å¢åŠ ç”¨æˆ¶è¨Šæ¯è¨ˆæ•¸

**é©—æ”¶æ¨™æº–**:
- [ ] æ‰€æœ‰è¨Šæ¯é¡å‹éƒ½èƒ½æ­£ç¢ºæ¥æ”¶
- [ ] æª”æ¡ˆè‡ªå‹•ä¸‹è¼‰æˆåŠŸç‡ > 98%
- [ ] æª”æ¡ˆåˆ†é¡æ­£ç¢º
- [ ] è³‡æ–™åº«è¨˜éŒ„å®Œæ•´
- [ ] éŒ¯èª¤è™•ç†å®Œå–„ï¼ˆå¤±æ•—ä¸å½±éŸ¿å…¶ä»–è¨Šæ¯ï¼‰

---

#### åŠŸèƒ½æ¨¡çµ„ 2ï¼šç”¨æˆ¶è³‡æ–™ç®¡ç†

**å„ªå…ˆç´š**: P0ï¼ˆå¿…é ˆæœ‰ï¼‰
**ç‹€æ…‹**: âœ… å·²å¯¦ä½œ

**åŠŸèƒ½æè¿°**:
è‡ªå‹•æ”¶é›†å’Œç®¡ç† LINE ç”¨æˆ¶è³‡æ–™ï¼ŒåŒ…æ‹¬ LINE Profile è³‡æ–™ã€ç¾¤çµ„åç¨±ã€å®¢æˆ¶çœŸå¯¦å§“åç­‰ã€‚

**åŠŸèƒ½ç´°ç¯€**:

1. **è‡ªå‹•ç”¨æˆ¶å»ºç«‹/æ›´æ–°** (`userService.js`)
   - æ–°è¨Šæ¯æ™‚è‡ªå‹•æª¢æŸ¥ç”¨æˆ¶æ˜¯å¦å­˜åœ¨
   - ä¸å­˜åœ¨å‰‡å»ºç«‹æ–°ç”¨æˆ¶è¨˜éŒ„
   - å­˜åœ¨å‰‡æ›´æ–°æœ€å¾Œè¨Šæ¯æ™‚é–“

2. **LINE Profile API æ•´åˆ**
   - ç²å– `displayName`ï¼ˆLINE é¡¯ç¤ºåç¨±ï¼‰
   - ç²å– `pictureUrl`ï¼ˆç”¨æˆ¶é ­åƒ URLï¼‰
   - ç²å– `statusMessage`ï¼ˆLINE ç‹€æ…‹è¨Šæ¯ï¼‰
   - ç²å– `language`ï¼ˆç”¨æˆ¶èªè¨€è¨­å®šï¼‰
   - è™•ç†ç”¨æˆ¶å°é–æˆ–ä¸å­˜åœ¨çš„æƒ…æ³

3. **ç¾¤çµ„åç¨±è‡ªå‹•æ”¶é›†** (`groupService.js`)
   - æª¢æ¸¬è¨Šæ¯ä¾†æºé¡å‹ï¼ˆuser/group/roomï¼‰
   - æå– `groupId`
   - èª¿ç”¨ LINE Bot API `getGroupSummary()`
   - ç²å–ç¾¤çµ„è¨­å®šçš„ `groupName`
   - è‡ªå‹•æ›´æ–°è‡³ `group_display_name` æ¬„ä½

4. **å®¢æˆ¶å§“åç®¡ç†**
   - æ”¯æ´æ‰‹å‹•è¨­å®š `customer_name`ï¼ˆå®¢æˆ¶çœŸå¯¦å§“åï¼‰
   - æä¾›æ™ºèƒ½å§“åå»ºè­°åŠŸèƒ½ï¼ˆ`suggested_name`ï¼‰
   - å¾è¨Šæ¯å…§å®¹åˆ†æå¯èƒ½çš„å§“å
   - å¾ LINE displayName æå–çœŸå¯¦å§“å
   - æ’é™¤å¹²æ“¾è©å½™ï¼ˆå•†å“åç¨±ã€æ—¥æœŸç­‰ï¼‰

5. **ç”¨æˆ¶çµ±è¨ˆè³‡è¨Š**
   - è¨˜éŒ„é¦–æ¬¡è¨Šæ¯æ™‚é–“ï¼ˆ`first_message_at`ï¼‰
   - è¨˜éŒ„æœ€å¾Œè¨Šæ¯æ™‚é–“ï¼ˆ`last_message_at`ï¼‰
   - çµ±è¨ˆè¨Šæ¯æ•¸é‡ï¼ˆ`message_count`ï¼‰
   - ç”¨æˆ¶ç‹€æ…‹æ¨™è¨˜ï¼ˆ`is_active`ï¼‰

**API ç«¯é»**:
- `GET /api/users` - å–å¾—æ‰€æœ‰ç”¨æˆ¶åˆ—è¡¨
- `GET /api/users/with-group-names` - å–å¾—åŒ…å«ç¾¤çµ„åç¨±çš„ç”¨æˆ¶åˆ—è¡¨
- `PUT /api/users/:userId/group-name` - æ›´æ–°ç¾¤çµ„é¡¯ç¤ºåç¨±

**é©—æ”¶æ¨™æº–**:
- [ ] æ–°ç”¨æˆ¶è‡ªå‹•å»ºç«‹æˆåŠŸç‡ > 99%
- [ ] LINE Profile è³‡æ–™ç²å–æˆåŠŸç‡ > 95%
- [ ] ç¾¤çµ„åç¨±è‡ªå‹•è¨˜éŒ„æˆåŠŸç‡ > 98%
- [ ] æ‰‹å‹•è¨­å®šå§“ååŠŸèƒ½æ­£å¸¸
- [ ] è³‡æ–™æ›´æ–°å³æ™‚æ€§ < 3 ç§’

---

#### åŠŸèƒ½æ¨¡çµ„ 3ï¼šå®¢æˆ¶å§“åç®¡ç†ç³»çµ±

**å„ªå…ˆç´š**: P1ï¼ˆé‡è¦ï¼‰
**ç‹€æ…‹**: âœ… å·²å¯¦ä½œ

**åŠŸèƒ½æè¿°**:
ç¨ç«‹çš„å®¢æˆ¶å§“åç®¡ç†ä»‹é¢ï¼Œå”åŠ©å®¢æœäººå“¡ç‚º LINE å®¢æˆ¶è¨­å®šçœŸå¯¦å§“åï¼Œè§£æ±º LINE API ç„¡æ³•ç²å–å¾Œå°ã€Œè¯çµ¡äººå§“åã€çš„é™åˆ¶ã€‚

**åŠŸèƒ½ç´°ç¯€**:

1. **å®¢æˆ¶åˆ—è¡¨é¡¯ç¤º** (`customer-management.html`)
   - åˆ—å‡ºæ‰€æœ‰éœ€è¦è¨­å®šå§“åçš„å®¢æˆ¶
   - é¡¯ç¤º LINE é¡¯ç¤ºåç¨±ã€ç”¨æˆ¶ ID
   - é¡¯ç¤ºæœ€è¿‘ 3 å‰‡è¨Šæ¯ä½œç‚ºåƒè€ƒ
   - é¡¯ç¤ºè¨Šæ¯æ•¸é‡çµ±è¨ˆ

2. **çµ±è¨ˆå„€è¡¨æ¿**
   - ç¸½å®¢æˆ¶æ•¸
   - å·²è¨­å®šå§“åæ•¸é‡
   - å¾…è¨­å®šå§“åæ•¸é‡
   - å®Œæˆç‡ç™¾åˆ†æ¯”
   - è‡ªå‹•æ›´æ–°çµ±è¨ˆè³‡æ–™

3. **å§“åè¨­å®šåŠŸèƒ½**
   - å³æ™‚ç·¨è¼¯å®¢æˆ¶å§“å
   - å–®å€‹å„²å­˜æˆ–æ‰¹é‡å„²å­˜
   - é©—è­‰å§“åæ ¼å¼
   - æˆåŠŸ/éŒ¯èª¤é€šçŸ¥

4. **CSV åŒ¯å…¥/åŒ¯å‡º**
   - åŒ¯å‡ºå®¢æˆ¶åˆ—è¡¨ç‚º CSV
   - åŒ¯å…¥ CSV æ‰¹é‡è¨­å®šå§“å
   - æ ¼å¼é©—è­‰å’ŒéŒ¯èª¤è™•ç†

5. **æ™ºèƒ½å§“åå»ºè­°**ï¼ˆè¼”åŠ©åŠŸèƒ½ï¼‰
   - åˆ†æè¨Šæ¯å…§å®¹ä¸­çš„è‡ªæˆ‘ä»‹ç´¹
   - åŒ¹é…æ¨¡å¼ï¼š"æˆ‘æ˜¯XXX"ã€"å«æˆ‘XXX"ã€"å§“å: XXX"
   - å¾ LINE displayName æå–å¯èƒ½çš„çœŸå¯¦å§“å
   - åƒ…ä½œç‚ºå»ºè­°ï¼Œéœ€äººå·¥ç¢ºèª

**API ç«¯é»**:
- `GET /api/customers/needing-names` - å–å¾—éœ€è¦è¨­å®šå§“åçš„å®¢æˆ¶
- `POST /api/customers/batch-update` - æ‰¹é‡æ›´æ–°å®¢æˆ¶å§“å
- `GET /api/customers/export` - åŒ¯å‡ºå®¢æˆ¶è³‡æ–™ç‚º CSV
- `POST /api/customers/import` - å¾ CSV åŒ¯å…¥å®¢æˆ¶è³‡æ–™
- `GET /api/customers/stats` - å–å¾—çµ±è¨ˆè³‡è¨Š

**é©—æ”¶æ¨™æº–**:
- [ ] ä»‹é¢è¼‰å…¥æ™‚é–“ < 2 ç§’
- [ ] è¨Šæ¯åƒè€ƒè³‡è¨Šå®Œæ•´
- [ ] å–®å€‹/æ‰¹é‡å„²å­˜åŠŸèƒ½æ­£å¸¸
- [ ] CSV åŒ¯å…¥/åŒ¯å‡ºç„¡éŒ¯èª¤
- [ ] çµ±è¨ˆè³‡æ–™æº–ç¢º
- [ ] å§“åå»ºè­°æº–ç¢ºç‡ > 60%ï¼ˆè¼”åŠ©åŠŸèƒ½ï¼‰

---

#### åŠŸèƒ½æ¨¡çµ„ 4ï¼šè¨Šæ¯æŸ¥è©¢èˆ‡æœå°‹

**å„ªå…ˆç´š**: P0ï¼ˆå¿…é ˆæœ‰ï¼‰
**ç‹€æ…‹**: âœ… å·²å¯¦ä½œï¼ˆå‰ç«¯å¯¦ä½œï¼Œå¾…å„ªåŒ–ï¼‰

**åŠŸèƒ½æè¿°**:
æä¾›ç¶²é ä»‹é¢æŸ¥è©¢å’Œæœå°‹æ‰€æœ‰æ”¶é›†åˆ°çš„è¨Šæ¯ï¼Œæ”¯æ´å¤šç¨®ç¯©é¸æ¢ä»¶ã€‚

**åŠŸèƒ½ç´°ç¯€**:

1. **è¨Šæ¯åˆ—è¡¨é¡¯ç¤º** (`public/index.html`)
   - åˆ†é é¡¯ç¤ºæ‰€æœ‰è¨Šæ¯
   - é¡¯ç¤ºè¨Šæ¯é¡å‹ã€æ™‚é–“ã€å…§å®¹
   - é¡¯ç¤ºç”¨æˆ¶è³‡æ–™ï¼ˆé ­åƒã€åç¨±ã€LINE IDï¼‰
   - é¡¯ç¤ºç¾¤çµ„åç¨±ï¼ˆè—è‰²æ¨™ç±¤ï¼‰
   - åœ–ç‰‡/æª”æ¡ˆé è¦½å’Œä¸‹è¼‰
   - æ”¯æ´é‡æ–°æ•´ç†

2. **è¨Šæ¯é¡å‹ç¯©é¸**
   - å…¨éƒ¨è¨Šæ¯
   - åƒ…æ–‡å­—è¨Šæ¯
   - åƒ…åœ–ç‰‡è¨Šæ¯
   - åƒ…æª”æ¡ˆè¨Šæ¯
   - åƒ…éŸ³è¨Šè¨Šæ¯
   - åƒ…è¦–è¨Šè¨Šæ¯

3. **æœå°‹åŠŸèƒ½**
   - æœå°‹ç¯„åœï¼šç”¨æˆ¶åç¨±ã€ç¾¤çµ„åç¨±ã€è¨Šæ¯å…§å®¹ã€æª”æ¡ˆåç¨±
   - å³æ™‚æœå°‹çµæœé¡¯ç¤º
   - çµæœæ•¸é‡çµ±è¨ˆ
   - ç›®å‰é™åˆ¶ï¼šå‰ç«¯å¯¦ä½œï¼Œåƒ…æœå°‹å·²è¼‰å…¥çš„ 1000 å‰‡è¨Šæ¯

4. **ç”¨æˆ¶è¨Šæ¯æŸ¥è©¢**
   - é»æ“Šç”¨æˆ¶å¡ç‰‡æŸ¥çœ‹è©²ç”¨æˆ¶æ‰€æœ‰è¨Šæ¯
   - è‡ªå‹•ç¯©é¸ä¸¦è·³è½‰åˆ°è¨Šæ¯åˆ—è¡¨
   - é¡¯ç¤ºè©²ç”¨æˆ¶çš„è¨Šæ¯æ•¸é‡

**API ç«¯é»**:
- `GET /api/messages` - å–å¾—è¨Šæ¯åˆ—è¡¨ï¼ˆæ”¯æ´ limit/offset åˆ†é ï¼Œuser_id ç¯©é¸ï¼‰
- `GET /api/messages/user/:lineUserId` - å–å¾—ç‰¹å®šç”¨æˆ¶çš„æ‰€æœ‰è¨Šæ¯

**æœªä¾†å„ªåŒ–**:
- [ ] å¾Œç«¯å¯¦ä½œæœå°‹åŠŸèƒ½ï¼ˆæ”¯æ´å¤§é‡è³‡æ–™ï¼‰
- [ ] é€²éšç¯©é¸ï¼ˆæ—¥æœŸç¯„åœã€æª”æ¡ˆé¡å‹ï¼‰
- [ ] æ’åºåŠŸèƒ½ï¼ˆæ™‚é–“ã€ç”¨æˆ¶ï¼‰
- [ ] è¨Šæ¯æ¨™è¨˜å’Œåˆ†é¡

**é©—æ”¶æ¨™æº–**:
- [ ] åˆ—è¡¨è¼‰å…¥æ™‚é–“ < 3 ç§’ï¼ˆ1000 å‰‡è¨Šæ¯ï¼‰
- [ ] æœå°‹éŸ¿æ‡‰æ™‚é–“ < 1 ç§’ï¼ˆå‰ç«¯ï¼‰
- [ ] ç¯©é¸åŠŸèƒ½æ­£å¸¸
- [ ] åœ–ç‰‡/æª”æ¡ˆé è¦½æ­£å¸¸
- [ ] ç”¨æˆ¶è³‡æ–™å®Œæ•´é¡¯ç¤º

---

#### åŠŸèƒ½æ¨¡çµ„ 5ï¼šè³‡æ–™åŒ¯å‡º

**å„ªå…ˆç´š**: P1ï¼ˆé‡è¦ï¼‰
**ç‹€æ…‹**: âœ… å·²å¯¦ä½œ

**åŠŸèƒ½æè¿°**:
æä¾›å¤šç¨®æ ¼å¼çš„è³‡æ–™åŒ¯å‡ºåŠŸèƒ½ï¼Œæ»¿è¶³ä¸åŒçš„è³‡æ–™åˆ†æå’Œå‚™ä»½éœ€æ±‚ã€‚

**åŠŸèƒ½ç´°ç¯€**:

1. **ç”¨æˆ¶è³‡æ–™ CSV åŒ¯å‡º** (`GET /api/export/users/csv`)
   - åŒ…å«æ‰€æœ‰ç”¨æˆ¶åŸºæœ¬è³‡æ–™
   - æ¬„ä½ï¼šLINE IDã€é¡¯ç¤ºåç¨±ã€å®¢æˆ¶å§“åã€ç¾¤çµ„åç¨±ã€è¨Šæ¯æ•¸é‡ã€åŠ å…¥æ™‚é–“ç­‰
   - UTF-8 BOM ç·¨ç¢¼ï¼ˆæ”¯æ´ Excel æ­£ç¢ºé–‹å•Ÿä¸­æ–‡ï¼‰

2. **è¨Šæ¯è³‡æ–™ CSV åŒ¯å‡º** (`GET /api/export/messages/csv`)
   - åŒ…å«æ‰€æœ‰è¨Šæ¯è¨˜éŒ„
   - æ¬„ä½ï¼šè¨Šæ¯ IDã€ç”¨æˆ¶åç¨±ã€ç¾¤çµ„åç¨±ã€è¨Šæ¯é¡å‹ã€å…§å®¹ã€æª”æ¡ˆåç¨±ã€æ™‚é–“ç­‰
   - UTF-8 BOM ç·¨ç¢¼

3. **Excel å®Œæ•´å ±å‘Š** (`GET /api/export/excel`)
   - å¤šå·¥ä½œè¡¨è¨­è¨ˆï¼š
     - Sheet 1: ç”¨æˆ¶è³‡æ–™
     - Sheet 2: è¨Šæ¯è³‡æ–™
     - Sheet 3: çµ±è¨ˆè³‡æ–™ï¼ˆç”¨æˆ¶æ•¸ã€è¨Šæ¯æ•¸ã€æª”æ¡ˆæ•¸ç­‰ï¼‰
   - æ¨£å¼æ ¼å¼åŒ–ï¼ˆæ¨™é¡Œç²—é«”ã€æ¬„å¯¬è‡ªå‹•èª¿æ•´ï¼‰
   - åŒ…å«å®Œæ•´è³‡è¨Š

4. **JSON æ ¼å¼åŒ¯å‡º** (`GET /api/export/json`)
   - å®Œæ•´çš„è³‡æ–™çµæ§‹
   - åŒ…å« metadataï¼ˆåŒ¯å‡ºæ™‚é–“ã€ç‰ˆæœ¬ã€çµ±è¨ˆï¼‰
   - é©åˆç¨‹å¼åŒ–è™•ç†å’Œ API æ•´åˆ

5. **åœ–ç‰‡ ZIP å°è£** (`GET /api/export/images/zip`)
   - å¾ Supabase Storage ä¸‹è¼‰æ‰€æœ‰åœ–ç‰‡
   - æª”åæ ¼å¼ï¼š`{ç¾¤çµ„åç¨±/ç”¨æˆ¶åç¨±}_{æ™‚é–“æˆ³}_{åŸæª”å}`
   - æœ€å¤§å£“ç¸®æ¯”
   - ä¸²æµè¼¸å‡ºï¼ˆæ¸›å°‘è¨˜æ†¶é«”ä½¿ç”¨ï¼‰

6. **PDF çµ±è¨ˆå ±å‘Š** (`GET /api/export/pdf`)
   - ç³»çµ±çµ±è¨ˆæ‘˜è¦
   - ç”¨æˆ¶åˆ—è¡¨ï¼ˆå‰ 20 ä½ï¼‰
   - æœ€è¿‘è¨Šæ¯ï¼ˆå‰ 30 å‰‡ï¼‰
   - è¦–è¦ºåŒ–è¡¨æ ¼
   - A4 é é¢æ ¼å¼

**æŠ€è¡“å¯¦ä½œ**:
- ä½¿ç”¨ `csv-writer` ç”Ÿæˆ CSV
- ä½¿ç”¨ `exceljs` ç”Ÿæˆ Excel
- ä½¿ç”¨ `archiver` ç”Ÿæˆ ZIP
- ä½¿ç”¨ `pdfkit` ç”Ÿæˆ PDF
- ä¸²æµè¼¸å‡ºï¼Œæ¸›å°‘è¨˜æ†¶é«”ä½¿ç”¨
- è‡ªå‹•æ¸…ç†æš«å­˜æª”æ¡ˆ

**é©—æ”¶æ¨™æº–**:
- [ ] æ‰€æœ‰æ ¼å¼åŒ¯å‡ºæˆåŠŸç‡ > 98%
- [ ] è³‡æ–™å®Œæ•´æ€§ 100%
- [ ] ç”Ÿæˆæ™‚é–“ < 30 ç§’ï¼ˆ1000 å‰‡è¨Šæ¯ï¼‰
- [ ] ZIP ä¸‹è¼‰æ‰€æœ‰åœ–ç‰‡æˆåŠŸ
- [ ] æª”æ¡ˆæ ¼å¼æ­£ç¢ºï¼Œå¯æ­£å¸¸é–‹å•Ÿ
- [ ] ä¸­æ–‡é¡¯ç¤ºæ­£å¸¸

---

#### åŠŸèƒ½æ¨¡çµ„ 6ï¼šæª”æ¡ˆå„²å­˜èˆ‡ä¸‹è¼‰

**å„ªå…ˆç´š**: P0ï¼ˆå¿…é ˆæœ‰ï¼‰
**ç‹€æ…‹**: âœ… å·²å¯¦ä½œ

**åŠŸèƒ½æè¿°**:
ä½¿ç”¨ Supabase Storage å„²å­˜æ‰€æœ‰æª”æ¡ˆï¼ˆåœ–ç‰‡ã€æ–‡ä»¶ã€éŸ³è¦–è¨Šï¼‰ï¼Œä¸¦æä¾›ä¸‹è¼‰åŠŸèƒ½ã€‚

**åŠŸèƒ½ç´°ç¯€**:

1. **æª”æ¡ˆä¸Šå‚³** (`fileService.js`)
   - å¾ LINE ä¸‹è¼‰æª”æ¡ˆå…§å®¹
   - é©—è­‰æª”æ¡ˆå¤§å°ï¼ˆ< 50MBï¼‰
   - åˆ¤æ–·æª”æ¡ˆé¡å‹ï¼ˆMIME typeï¼‰
   - ä¾é¡å‹åˆ†é¡å„²å­˜
   - ç”Ÿæˆå”¯ä¸€æª”å
   - ä¸Šå‚³è‡³ Supabase Storage

2. **æª”æ¡ˆåˆ†é¡**
   - `images/` - åœ–ç‰‡æª”æ¡ˆï¼ˆJPGã€PNGã€GIF ç­‰ï¼‰
   - `audio/` - éŸ³è¨Šæª”æ¡ˆï¼ˆMP3ã€M4A ç­‰ï¼‰
   - `video/` - è¦–è¨Šæª”æ¡ˆï¼ˆMP4ã€MOV ç­‰ï¼‰
   - `documents/pdf/` - PDF æ–‡ä»¶
   - `documents/word/` - Word æ–‡ä»¶
   - `documents/excel/` - Excel æ–‡ä»¶
   - `files/` - å…¶ä»–æª”æ¡ˆ

3. **æª”æ¡ˆä¸‹è¼‰** (`GET /api/files/:fileId`)
   - æŸ¥è©¢æª”æ¡ˆè¨˜éŒ„
   - ç”Ÿæˆ Supabase Storage ç°½å URLï¼ˆæœ‰æ•ˆæœŸ 1 å°æ™‚ï¼‰
   - é‡å®šå‘åˆ°ç°½å URL
   - ç€è¦½å™¨è‡ªå‹•ä¸‹è¼‰æª”æ¡ˆ

4. **Storage ç®¡ç†**
   - Bucket åç¨±ï¼š`line-files`
   - å…¬é–‹è®€å–æ¬Šé™ï¼ˆé€éç°½å URLï¼‰
   - è‡ªå‹•æ¸…ç†éæœŸæª”æ¡ˆï¼ˆæœªå¯¦ä½œï¼‰

**é©—æ”¶æ¨™æº–**:
- [ ] æª”æ¡ˆä¸Šå‚³æˆåŠŸç‡ > 98%
- [ ] æª”æ¡ˆåˆ†é¡æ­£ç¢º
- [ ] ä¸‹è¼‰æˆåŠŸç‡ > 99%
- [ ] ç°½å URL æ­£å¸¸ç”Ÿæ•ˆ
- [ ] æ”¯æ´æ‰€æœ‰å¸¸è¦‹æª”æ¡ˆæ ¼å¼

---

#### åŠŸèƒ½æ¨¡çµ„ 7ï¼šç³»çµ±é™åˆ¶æ©Ÿåˆ¶

**å„ªå…ˆç´š**: P1ï¼ˆé‡è¦ï¼‰
**ç‹€æ…‹**: âœ… å·²å¯¦ä½œ

**åŠŸèƒ½æè¿°**:
å¯¦ä½œè¨Šæ¯æ•¸é‡å’Œç”¨æˆ¶æ•¸é‡çš„é™åˆ¶æ©Ÿåˆ¶ï¼Œä¿è­·æ¸¬è©¦ç’°å¢ƒå’Œå…è²»æ–¹æ¡ˆè³‡æºã€‚

**åŠŸèƒ½ç´°ç¯€**:

1. **é™åˆ¶è¨­å®š**
   - æœ€å¤§è¨Šæ¯æ•¸é‡ï¼šç’°å¢ƒè®Šæ•¸ `MAX_MESSAGES`ï¼ˆé è¨­ 1000ï¼‰
   - æœ€å¤§ç”¨æˆ¶æ•¸é‡ï¼šç’°å¢ƒè®Šæ•¸ `MAX_USERS`ï¼ˆé è¨­ 100ï¼‰
   - å¯èª¿æ•´è¨­å®šï¼ˆéœ€é‡æ–°éƒ¨ç½²ï¼‰

2. **æª¢æŸ¥æ©Ÿåˆ¶** (`limitService.js`)
   - æ¯æ¬¡æ¥æ”¶è¨Šæ¯å‰æª¢æŸ¥é™åˆ¶
   - ä½¿ç”¨ Supabase RPC å‡½æ•¸ï¼š
     - `can_accept_new_user(line_user_id)` - æª¢æŸ¥ç”¨æˆ¶é™åˆ¶
     - `check_message_limits()` - æª¢æŸ¥è¨Šæ¯é™åˆ¶
   - è³‡æ–™åº«å±¤ç´šæª¢æŸ¥ï¼Œç¢ºä¿ä¸€è‡´æ€§

3. **è¶…é™è™•ç†**
   - é”åˆ°ç”¨æˆ¶ä¸Šé™ï¼šæ‹’çµ•æ–°ç”¨æˆ¶è¨Šæ¯
   - é”åˆ°è¨Šæ¯ä¸Šé™ï¼šæ‹’çµ•æ‰€æœ‰æ–°è¨Šæ¯
   - è¨˜éŒ„éŒ¯èª¤æ—¥èªŒ
   - ä¸å½±éŸ¿ç³»çµ±ç©©å®šæ€§

4. **å‰ç«¯è­¦å‘Š**
   - çµ±è¨ˆå„€è¡¨æ¿é¡¯ç¤ºç•¶å‰/ä¸Šé™
   - é” 90% æ™‚ç´…è‰²è­¦å‘Š
   - æç¤ºç®¡ç†å“¡æ³¨æ„

**Supabase RPC å‡½æ•¸**:

```sql
-- æª¢æŸ¥ç”¨æˆ¶é™åˆ¶
CREATE OR REPLACE FUNCTION can_accept_new_user(new_line_user_id TEXT)
RETURNS BOOLEAN AS $$
DECLARE
    user_count INTEGER;
    max_users INTEGER;
    user_exists BOOLEAN;
BEGIN
    SELECT COUNT(*) INTO user_count FROM users;
    max_users := 100;  -- æˆ–å¾ config è¡¨è®€å–
    SELECT EXISTS(SELECT 1 FROM users WHERE line_user_id = new_line_user_id) INTO user_exists;

    IF user_exists THEN
        RETURN TRUE;  -- å·²å­˜åœ¨ç”¨æˆ¶ï¼Œå…è¨±
    ELSIF user_count < max_users THEN
        RETURN TRUE;  -- æœªé”ä¸Šé™ï¼Œå…è¨±
    ELSE
        RETURN FALSE;  -- é”åˆ°ä¸Šé™ï¼Œæ‹’çµ•
    END IF;
END;
$$ LANGUAGE plpgsql;

-- æª¢æŸ¥è¨Šæ¯é™åˆ¶
CREATE OR REPLACE FUNCTION check_message_limits()
RETURNS BOOLEAN AS $$
DECLARE
    message_count INTEGER;
    max_messages INTEGER;
BEGIN
    SELECT COUNT(*) INTO message_count FROM messages;
    max_messages := 1000;  -- æˆ–å¾ config è¡¨è®€å–

    IF message_count < max_messages THEN
        RETURN TRUE;
    ELSE
        RETURN FALSE;
    END IF;
END;
$$ LANGUAGE plpgsql;
```

**é©—æ”¶æ¨™æº–**:
- [ ] é”åˆ°é™åˆ¶æ™‚æ­£ç¢ºæ‹’çµ•æ–°è³‡æ–™
- [ ] ä¸å½±éŸ¿å·²å­˜åœ¨ç”¨æˆ¶çš„è¨Šæ¯
- [ ] å‰ç«¯è­¦å‘Šæ­£å¸¸é¡¯ç¤º
- [ ] éŒ¯èª¤æ—¥èªŒè¨˜éŒ„å®Œæ•´

---

#### åŠŸèƒ½æ¨¡çµ„ 8ï¼šçµ±è¨ˆè³‡è¨Šå„€è¡¨æ¿

**å„ªå…ˆç´š**: P2ï¼ˆå»ºè­°æœ‰ï¼‰
**ç‹€æ…‹**: âœ… å·²å¯¦ä½œ

**åŠŸèƒ½æè¿°**:
æä¾›ç³»çµ±çµ±è¨ˆè³‡è¨Šçš„å³æ™‚é¡¯ç¤ºï¼Œå¹«åŠ©ç®¡ç†å“¡æŒæ¡ç³»çµ±ç‹€æ…‹ã€‚

**åŠŸèƒ½ç´°ç¯€**:

1. **çµ±è¨ˆè³‡è¨Š** (`GET /api/stats`)
   - ç¸½è¨Šæ¯æ•¸é‡
   - ç¸½ç”¨æˆ¶æ•¸é‡
   - ç¸½æª”æ¡ˆæ•¸é‡
   - è¨Šæ¯é™åˆ¶ï¼ˆç•¶å‰/ä¸Šé™ï¼‰
   - ç”¨æˆ¶é™åˆ¶ï¼ˆç•¶å‰/ä¸Šé™ï¼‰
   - æª”æ¡ˆç¸½å¤§å°ï¼ˆæœªå¯¦ä½œï¼‰

2. **å‰ç«¯å„€è¡¨æ¿**
   - çµ±è¨ˆå¡ç‰‡å¼é¡¯ç¤º
   - è‡ªå‹•æ¯ 30 ç§’æ›´æ–°
   - é” 90% é™åˆ¶æ™‚ç´…è‰²è­¦å‘Š
   - ä½¿ç”¨ç‡ç™¾åˆ†æ¯”é¡¯ç¤º

3. **å¥åº·æª¢æŸ¥** (`GET /health`)
   - ä¾› Render ç›£æ§æœå‹™ç‹€æ…‹
   - æª¢æŸ¥è³‡æ–™åº«é€£ç·š
   - è¿”å›ç³»çµ±ç‹€æ…‹

**é©—æ”¶æ¨™æº–**:
- [ ] çµ±è¨ˆè³‡æ–™æº–ç¢º
- [ ] è‡ªå‹•æ›´æ–°æ­£å¸¸
- [ ] è­¦å‘Šé¡¯ç¤ºæ­£ç¢º
- [ ] å¥åº·æª¢æŸ¥éŸ¿æ‡‰æ­£å¸¸

---

### 5.2 åŠŸèƒ½å„ªå…ˆç´šç¸½çµ

| åŠŸèƒ½æ¨¡çµ„ | å„ªå…ˆç´š | ç‹€æ…‹ | å‚™è¨» |
|---------|--------|------|------|
| è¨Šæ¯æ¥æ”¶èˆ‡è™•ç† | P0 | âœ… å·²å¯¦ä½œ | æ ¸å¿ƒåŠŸèƒ½ |
| ç”¨æˆ¶è³‡æ–™ç®¡ç† | P0 | âœ… å·²å¯¦ä½œ | æ ¸å¿ƒåŠŸèƒ½ |
| å®¢æˆ¶å§“åç®¡ç†ç³»çµ± | P1 | âœ… å·²å¯¦ä½œ | é‡è¦åŠŸèƒ½ |
| è¨Šæ¯æŸ¥è©¢èˆ‡æœå°‹ | P0 | âœ… å·²å¯¦ä½œ | æ ¸å¿ƒåŠŸèƒ½ï¼Œå¾…å„ªåŒ– |
| è³‡æ–™åŒ¯å‡º | P1 | âœ… å·²å¯¦ä½œ | é‡è¦åŠŸèƒ½ |
| æª”æ¡ˆå„²å­˜èˆ‡ä¸‹è¼‰ | P0 | âœ… å·²å¯¦ä½œ | æ ¸å¿ƒåŠŸèƒ½ |
| ç³»çµ±é™åˆ¶æ©Ÿåˆ¶ | P1 | âœ… å·²å¯¦ä½œ | é‡è¦åŠŸèƒ½ |
| çµ±è¨ˆè³‡è¨Šå„€è¡¨æ¿ | P2 | âœ… å·²å¯¦ä½œ | å»ºè­°åŠŸèƒ½ |

---

## 6. éåŠŸèƒ½éœ€æ±‚

### 6.1 æ•ˆèƒ½éœ€æ±‚

| æŒ‡æ¨™ | ç›®æ¨™å€¼ | ç›®å‰ç‹€æ…‹ |
|-----|--------|---------|
| Webhook éŸ¿æ‡‰æ™‚é–“ | < 3 ç§’ | âœ… é”æ¨™ |
| è¨Šæ¯åˆ—è¡¨è¼‰å…¥æ™‚é–“ | < 3 ç§’ï¼ˆ1000 å‰‡ï¼‰ | âœ… é”æ¨™ |
| æœå°‹éŸ¿æ‡‰æ™‚é–“ | < 2 ç§’ | âœ… é”æ¨™ï¼ˆå‰ç«¯ï¼‰ |
| è³‡æ–™åŒ¯å‡ºæ™‚é–“ | < 30 ç§’ï¼ˆ1000 å‰‡ï¼‰ | âœ… é”æ¨™ |
| API ç«¯é»éŸ¿æ‡‰æ™‚é–“ | < 2 ç§’ | âœ… é”æ¨™ |
| åŒæ™‚è™•ç†è¨Šæ¯æ•¸ | > 10 å€‹/ç§’ | âš ï¸ æœªæ¸¬è©¦ |
| æª”æ¡ˆä¸Šå‚³æˆåŠŸç‡ | > 98% | âœ… é”æ¨™ |
| ç³»çµ±æ­£å¸¸é‹è¡Œæ™‚é–“ | > 99% | âœ… é”æ¨™ |

### 6.2 å®‰å…¨æ€§éœ€æ±‚

1. **èº«ä»½é©—è­‰**
   - âœ… LINE Webhook ç°½ç« é©—è­‰
   - âš ï¸ æŸ¥è©¢ä»‹é¢ç„¡èº«ä»½é©—è­‰ï¼ˆåƒ…é™å…§éƒ¨ä½¿ç”¨ï¼‰
   - âš ï¸ API ç«¯é»ç„¡èº«ä»½é©—è­‰ï¼ˆéœ€è¦åŠ å¼·ï¼‰

2. **è³‡æ–™ä¿è­·**
   - âœ… HTTPS åŠ å¯†å‚³è¼¸
   - âœ… ç’°å¢ƒè®Šæ•¸å„²å­˜æ•æ„Ÿè³‡è¨Š
   - âœ… .gitignore æ’é™¤ .env æª”æ¡ˆ
   - âš ï¸ Supabase Storage å…¬é–‹å­˜å–ï¼ˆé€éç°½å URLï¼‰

3. **è¼¸å…¥é©—è­‰**
   - âœ… æª”æ¡ˆå¤§å°é™åˆ¶ï¼ˆ50MBï¼‰
   - âœ… æª”æ¡ˆé¡å‹é©—è­‰
   - âš ï¸ XSS é˜²è­·ï¼ˆåŸºæœ¬é˜²è­·ï¼‰
   - âš ï¸ SQL Injection é˜²è­·ï¼ˆä½¿ç”¨ ORMï¼‰

4. **éŒ¯èª¤è™•ç†**
   - âœ… æ•ç²æ‰€æœ‰éŒ¯èª¤
   - âœ… ä¸æ´©æ¼æ•æ„Ÿè³‡è¨Š
   - âœ… è¨˜éŒ„éŒ¯èª¤æ—¥èªŒ

**æ”¹å–„å»ºè­°**:
- [ ] å¢åŠ ç®¡ç†ä»‹é¢èº«ä»½é©—è­‰ï¼ˆåŸºæœ¬çš„å¸³è™Ÿå¯†ç¢¼æˆ– Tokenï¼‰
- [ ] API ç«¯é»å¢åŠ  API Key é©—è­‰
- [ ] åŠ å¼· XSS å’Œ CSRF é˜²è­·
- [ ] è³‡æ–™åº«å®šæœŸå‚™ä»½æ©Ÿåˆ¶

### 6.3 å¯ç”¨æ€§éœ€æ±‚

1. **ç³»çµ±å¯ç”¨æ€§**
   - ç›®æ¨™ï¼š99% æ­£å¸¸é‹è¡Œæ™‚é–“
   - Render å…è²»æ–¹æ¡ˆï¼š15 åˆ†é˜ç„¡æ´»å‹•å¾Œä¼‘çœ 
   - å–šé†’æ™‚é–“ï¼š30-60 ç§’
   - å»ºè­°ï¼šç”Ÿç”¢ç’°å¢ƒä½¿ç”¨ä»˜è²»æ–¹æ¡ˆ

2. **è³‡æ–™å¯é æ€§**
   - Supabase è‡ªå‹•å‚™ä»½
   - è³‡æ–™å®Œæ•´æ€§æª¢æŸ¥
   - éŒ¯èª¤é‡è©¦æ©Ÿåˆ¶ï¼ˆéƒ¨åˆ†å¯¦ä½œï¼‰

3. **éŒ¯èª¤æ¢å¾©**
   - å–®ä¸€è¨Šæ¯å¤±æ•—ä¸å½±éŸ¿å…¶ä»–è¨Šæ¯
   - æª”æ¡ˆä¸Šå‚³å¤±æ•—è¨˜éŒ„éŒ¯èª¤æ—¥èªŒ
   - ç³»çµ±è‡ªå‹•æ¢å¾©

### 6.4 å¯æ“´å±•æ€§éœ€æ±‚

1. **è³‡æ–™é‡æ“´å±•**
   - ç›®å‰é™åˆ¶ï¼š1000 å‰‡è¨Šæ¯ï¼Œ100 å€‹ç”¨æˆ¶
   - è³‡æ–™åº«è¨­è¨ˆæ”¯æ´æ›´å¤§è³‡æ–™é‡
   - éœ€è¦å„ªåŒ–å‰ç«¯æœå°‹ï¼ˆå¾Œç«¯å¯¦ä½œï¼‰

2. **åŠŸèƒ½æ“´å±•**
   - æ¨¡çµ„åŒ–è¨­è¨ˆ
   - æ˜“æ–¼æ·»åŠ æ–°åŠŸèƒ½
   - API è¨­è¨ˆç¬¦åˆ RESTful åŸå‰‡

3. **å¤šç§Ÿæˆ¶æ”¯æ´**
   - ç›®å‰ä¸æ”¯æ´
   - æœªä¾†å¯æ“´å±•ç‚ºå¤šç§Ÿæˆ¶æ¶æ§‹

### 6.5 ç¶­è­·æ€§éœ€æ±‚

1. **ç¨‹å¼ç¢¼å“è³ª**
   - âœ… ES6+ èªæ³•
   - âœ… æ¨¡çµ„åŒ–è¨­è¨ˆ
   - âœ… é©ç•¶çš„è¨»è§£
   - âš ï¸ å–®å…ƒæ¸¬è©¦ï¼ˆéƒ¨åˆ†å¯¦ä½œï¼‰

2. **éƒ¨ç½²ä¾¿åˆ©æ€§**
   - âœ… ç’°å¢ƒè®Šæ•¸é…ç½®
   - âœ… è‡ªå‹•éƒ¨ç½²ï¼ˆRender + GitHubï¼‰
   - âœ… è©³ç´°éƒ¨ç½²æ–‡ä»¶

3. **ç›£æ§èˆ‡æ—¥èªŒ**
   - âœ… éŒ¯èª¤æ—¥èªŒè¨˜éŒ„
   - âœ… å¥åº·æª¢æŸ¥ç«¯é»
   - âš ï¸ é€²éšç›£æ§ï¼ˆæœªå¯¦ä½œï¼‰

### 6.6 ç›¸å®¹æ€§éœ€æ±‚

1. **ç€è¦½å™¨æ”¯æ´**
   - Chromeï¼ˆæœ€æ–°ç‰ˆï¼‰
   - Firefoxï¼ˆæœ€æ–°ç‰ˆï¼‰
   - Safariï¼ˆæœ€æ–°ç‰ˆï¼‰
   - Edgeï¼ˆæœ€æ–°ç‰ˆï¼‰
   - éŸ¿æ‡‰å¼è¨­è¨ˆï¼ˆæ”¯æ´æ‰‹æ©Ÿã€å¹³æ¿ï¼‰

2. **LINE å¹³å°æ”¯æ´**
   - LINE Messaging API v1
   - Webhook API v1
   - Profile API
   - Group API

3. **æª”æ¡ˆæ ¼å¼æ”¯æ´**
   - åœ–ç‰‡ï¼šJPGã€PNGã€GIFã€WebP
   - æ–‡ä»¶ï¼šPDFã€DOCã€DOCXã€XLSã€XLSXã€PPTã€PPTX
   - éŸ³è¨Šï¼šMP3ã€M4Aã€WAV
   - è¦–è¨Šï¼šMP4ã€MOVã€AVI

---

## 7. æŠ€è¡“æ¶æ§‹

### 7.1 ç³»çµ±æ¶æ§‹åœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        LINE Platform                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Messaging API â”‚  â”‚ Profile API â”‚  â”‚ Bot API (Group) â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                  â”‚                  â”‚
          â”‚ Webhook Events   â”‚ User Data        â”‚ Group Info
          â–¼                  â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Webhook Server (Node.js)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                   Express.js App                     â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚  Webhook    â”‚  â”‚  API Routes â”‚  â”‚ Static Filesâ”‚  â”‚   â”‚
â”‚  â”‚  â”‚  Handler    â”‚  â”‚  (RESTful)  â”‚  â”‚  (Public)   â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚           â”‚                   â”‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              Controllers Layer                       â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚ lineHandler  â”‚  â”‚  customerController         â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚            â”‚                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              Services Layer                          â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚  User    â”‚ â”‚  Group   â”‚ â”‚ Message  â”‚ â”‚  File  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ Service  â”‚ â”‚ Service  â”‚ â”‚ Service  â”‚ â”‚Service â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚       â”‚            â”‚            â”‚            â”‚        â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚  Limit   â”‚ â”‚  Export  â”‚ â”‚          â”‚ â”‚        â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ Service  â”‚ â”‚ Service  â”‚ â”‚  (Other  â”‚ â”‚Servicesâ”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                                     â”‚
            â”‚ SQL Queries                         â”‚ File Operations
            â–¼                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Supabase Platform                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  PostgreSQL Database â”‚   â”‚   Storage (S3-like)      â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚  â”‚  â”‚ users          â”‚  â”‚   â”‚  â”‚ line-files bucket  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚ messages       â”‚  â”‚   â”‚  â”‚ â”œâ”€â”€ images/        â”‚  â”‚    â”‚
â”‚  â”‚  â”‚ message_limits â”‚  â”‚   â”‚  â”‚ â”œâ”€â”€ audio/         â”‚  â”‚    â”‚
â”‚  â”‚  â”‚ system_stats   â”‚  â”‚   â”‚  â”‚ â”œâ”€â”€ video/         â”‚  â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚  â”‚ â””â”€â”€ documents/     â”‚  â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚  â”‚  â”‚ RPC Functions  â”‚  â”‚   â”‚                          â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚                          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                                     â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Web Client (Browser)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                  User Interface                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚   ä¸»ä»‹é¢    â”‚  â”‚ å®¢æˆ¶å§“åç®¡ç† â”‚  â”‚  çµ±è¨ˆå„€è¡¨  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ index.html  â”‚  â”‚  customer-   â”‚  â”‚    æ¿      â”‚  â”‚   â”‚
â”‚  â”‚  â”‚             â”‚  â”‚ management.  â”‚  â”‚            â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ - è¨Šæ¯åˆ—è¡¨  â”‚  â”‚    html      â”‚  â”‚ - çµ±è¨ˆè³‡æ–™ â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ - ç”¨æˆ¶åˆ—è¡¨  â”‚  â”‚             â”‚  â”‚ - é™åˆ¶ç‹€æ…‹ â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ - æœå°‹åŠŸèƒ½  â”‚  â”‚ - å®¢æˆ¶åˆ—è¡¨  â”‚  â”‚ - è­¦å‘Šæç¤º â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ - åŒ¯å‡ºè³‡æ–™  â”‚  â”‚ - å§“åè¨­å®š  â”‚  â”‚            â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.2 æŠ€è¡“æ£§

#### å¾Œç«¯æŠ€è¡“
- **åŸ·è¡Œç’°å¢ƒ**: Node.js (v18+)
- **Web æ¡†æ¶**: Express.js (v4.18.2)
- **LINE SDK**: @line/bot-sdk (v7.5.2)
- **è³‡æ–™åº«å®¢æˆ¶ç«¯**: @supabase/supabase-js (v2.38.0)
- **ç’°å¢ƒè®Šæ•¸**: dotenv (v16.3.1)
- **HTTP è«‹æ±‚**: axios (v1.6.0)
- **CORS**: cors (v2.8.5)

#### è³‡æ–™è™•ç†
- **CSV**: csv-writer (v1.6.0)
- **Excel**: exceljs (v4.4.0)
- **ZIP**: archiver (v6.0.1)
- **PDF**: pdfkit (v0.14.0)
- **æª”æ¡ˆä¸Šå‚³**: multer (v1.4.5)

#### å‰ç«¯æŠ€è¡“
- **HTML5 + CSS3 + JavaScript (Vanilla)**
- **ç„¡å‰ç«¯æ¡†æ¶**ï¼ˆè¼•é‡åŒ–è¨­è¨ˆï¼‰
- **éŸ¿æ‡‰å¼è¨­è¨ˆ**ï¼ˆè‡ªé©æ‡‰æ‰‹æ©Ÿ/å¹³æ¿/æ¡Œé¢ï¼‰

#### åŸºç¤è¨­æ–½
- **è³‡æ–™åº«**: Supabase PostgreSQL
- **æª”æ¡ˆå„²å­˜**: Supabase Storage (S3-compatible)
- **éƒ¨ç½²å¹³å°**: Render.com
- **ç‰ˆæœ¬æ§åˆ¶**: Git + GitHub

### 7.3 è³‡æ–™æµç¨‹

#### æµç¨‹ 1ï¼šæ¥æ”¶è¨Šæ¯

```
LINE User ç™¼é€è¨Šæ¯
    â†“
LINE Platform è™•ç†
    â†“
æ¨é€ Webhook Event åˆ° Server
    â†“
Express Middleware é©—è­‰ç°½ç« 
    â†“
lineHandler è§£æäº‹ä»¶
    â†“
æª¢æŸ¥ç³»çµ±é™åˆ¶ (limitService)
    â†“
ç²å–/å»ºç«‹ç”¨æˆ¶ (userService)
    â”œâ”€â†’ èª¿ç”¨ LINE Profile API
    â””â”€â†’ è‹¥ç‚ºç¾¤çµ„ï¼Œèª¿ç”¨ LINE Bot API ç²å–ç¾¤çµ„åç¨±
    â†“
è™•ç†è¨Šæ¯å…§å®¹
    â”œâ”€â†’ æ–‡å­—ï¼šç›´æ¥å„²å­˜
    â””â”€â†’ æª”æ¡ˆï¼šä¸‹è¼‰ â†’ ä¸Šå‚³è‡³ Storage (fileService)
    â†“
å„²å­˜è¨Šæ¯è‡³è³‡æ–™åº« (messageService)
    â†“
æ›´æ–°ç”¨æˆ¶çµ±è¨ˆè³‡è¨Š
    â†“
å›æ‡‰ LINE Platform (200 OK)
```

#### æµç¨‹ 2ï¼šæŸ¥è©¢è¨Šæ¯

```
ç”¨æˆ¶é–‹å•Ÿç¶²é ä»‹é¢
    â†“
è¼‰å…¥çµ±è¨ˆè³‡è¨Š (GET /api/stats)
    â†“
è¼‰å…¥è¨Šæ¯åˆ—è¡¨ (GET /api/messages?limit=1000)
    â†“
messageService æŸ¥è©¢è³‡æ–™åº«
    â”œâ”€â†’ JOIN users è¡¨å–å¾—ç”¨æˆ¶è³‡æ–™
    â””â”€â†’ åŒ…å« group_display_name
    â†“
å›å‚³ JSON è³‡æ–™åˆ°å‰ç«¯
    â†“
å‰ç«¯æ¸²æŸ“è¨Šæ¯åˆ—è¡¨
    â”œâ”€â†’ é¡¯ç¤ºæ–‡å­—å…§å®¹
    â”œâ”€â†’ é¡¯ç¤ºç”¨æˆ¶è³‡æ–™ï¼ˆé ­åƒã€åç¨±ï¼‰
    â”œâ”€â†’ é¡¯ç¤ºç¾¤çµ„åç¨±
    â””â”€â†’ é¡¯ç¤ºæª”æ¡ˆè³‡è¨Š
    â†“
ä½¿ç”¨è€…é»æ“Šä¸‹è¼‰æª”æ¡ˆ
    â†“
GET /api/files/:fileId
    â†“
fileService ç”Ÿæˆç°½å URL
    â†“
é‡å®šå‘åˆ° Supabase Storage
    â†“
ä¸‹è¼‰æª”æ¡ˆ
```

#### æµç¨‹ 3ï¼šè¨­å®šå®¢æˆ¶å§“å

```
å®¢æœé–‹å•Ÿå®¢æˆ¶å§“åç®¡ç†ä»‹é¢
    â†“
GET /api/customers/needing-names
    â†“
customerController æŸ¥è©¢æœªè¨­å®šå§“åçš„ç”¨æˆ¶
    â”œâ”€â†’ æŸ¥è©¢ç”¨æˆ¶è³‡æ–™
    â””â”€â†’ æŸ¥è©¢æœ€è¿‘ 3 å‰‡è¨Šæ¯
    â†“
å›å‚³ç”¨æˆ¶åˆ—è¡¨åˆ°å‰ç«¯
    â†“
å‰ç«¯é¡¯ç¤ºå®¢æˆ¶è³‡è¨Šå’Œè¨Šæ¯åƒè€ƒ
    â†“
å®¢æœè¼¸å…¥å®¢æˆ¶çœŸå¯¦å§“å
    â†“
POST /api/customers/batch-update
    â†“
customerController æ›´æ–°è³‡æ–™åº«
    â†“
å›å‚³æˆåŠŸè¨Šæ¯
    â†“
å‰ç«¯é¡¯ç¤ºæˆåŠŸé€šçŸ¥ä¸¦æ›´æ–°åˆ—è¡¨
```

### 7.4 å®‰å…¨è¨­è¨ˆ

1. **Webhook é©—è­‰**
```javascript
// ä½¿ç”¨ LINE SDK é©—è­‰ç°½ç« 
const signature = req.get('x-line-signature');
const body = JSON.stringify(req.body);
if (!validateSignature(body, CHANNEL_SECRET, signature)) {
    return res.status(401).send('Invalid signature');
}
```

2. **ç’°å¢ƒè®Šæ•¸ç®¡ç†**
```javascript
// æ‰€æœ‰æ•æ„Ÿè³‡è¨Šéƒ½é€éç’°å¢ƒè®Šæ•¸
require('dotenv').config();
const LINE_CHANNEL_ACCESS_TOKEN = process.env.LINE_CHANNEL_ACCESS_TOKEN;
const SUPABASE_SERVICE_KEY = process.env.SUPABASE_SERVICE_KEY;
```

3. **éŒ¯èª¤è™•ç†**
```javascript
// æ‰€æœ‰ async å‡½æ•¸éƒ½åŒ…å« try-catch
try {
    // æ¥­å‹™é‚è¼¯
} catch (error) {
    console.error('Error:', error);
    res.status(500).json({ error: 'Internal server error' });
}
```

4. **è¼¸å…¥é©—è­‰**
```javascript
// æª”æ¡ˆå¤§å°é©—è­‰
const MAX_FILE_SIZE = 50 * 1024 * 1024; // 50MB
if (fileSize > MAX_FILE_SIZE) {
    throw new Error('File too large');
}
```

---

## 8. è³‡æ–™çµæ§‹

### 8.1 è³‡æ–™åº« Schema

#### è¡¨: usersï¼ˆç”¨æˆ¶è³‡æ–™è¡¨ï¼‰

```sql
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    line_user_id TEXT UNIQUE NOT NULL,
    display_name TEXT,
    picture_url TEXT,
    status_message TEXT,
    language TEXT,
    group_display_name TEXT,        -- ç¾¤çµ„é¡¯ç¤ºåç¨±ï¼ˆå¾ LINE Bot APIï¼‰
    customer_name TEXT,              -- å®¢æˆ¶çœŸå¯¦å§“åï¼ˆæ‰‹å‹•è¨­å®šï¼‰
    suggested_name TEXT,             -- AI å»ºè­°å§“å
    is_active BOOLEAN DEFAULT TRUE,
    first_message_at TIMESTAMP WITH TIME ZONE,
    last_message_at TIMESTAMP WITH TIME ZONE,
    message_count INTEGER DEFAULT 0,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- ç´¢å¼•
CREATE INDEX idx_users_line_user_id ON users(line_user_id);
CREATE INDEX idx_users_is_active ON users(is_active);
CREATE INDEX idx_users_last_message_at ON users(last_message_at);
```

**æ¬„ä½èªªæ˜**:
- `line_user_id`: LINE å¹³å°ç”¨æˆ¶å”¯ä¸€è­˜åˆ¥ç¢¼
- `display_name`: å¾ LINE Profile API ç²å–çš„é¡¯ç¤ºåç¨±
- `picture_url`: ç”¨æˆ¶é ­åƒ URL
- `status_message`: LINE ç‹€æ…‹è¨Šæ¯
- `language`: ç”¨æˆ¶èªè¨€è¨­å®š
- `group_display_name`: ç¾¤çµ„èŠå¤©çš„åç¨±ï¼ˆå¾ LINE Bot API `getGroupSummary()` ç²å–ï¼‰
- `customer_name`: å®¢æˆ¶çœŸå¯¦å§“åï¼ˆå®¢æœæ‰‹å‹•è¨­å®šï¼‰
- `suggested_name`: ç³»çµ±å»ºè­°çš„å§“åï¼ˆå¾è¨Šæ¯åˆ†æï¼‰
- `is_active`: ç”¨æˆ¶æ˜¯å¦å•Ÿç”¨
- `first_message_at`: é¦–æ¬¡è¨Šæ¯æ™‚é–“
- `last_message_at`: æœ€å¾Œè¨Šæ¯æ™‚é–“
- `message_count`: è©²ç”¨æˆ¶çš„è¨Šæ¯ç¸½æ•¸

#### è¡¨: messagesï¼ˆè¨Šæ¯è³‡æ–™è¡¨ï¼‰

```sql
CREATE TABLE messages (
    id SERIAL PRIMARY KEY,
    line_message_id TEXT UNIQUE NOT NULL,
    user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,
    message_type TEXT NOT NULL,      -- text, image, file, audio, video
    text_content TEXT,
    file_id TEXT,
    file_name TEXT,
    file_path TEXT,
    file_size BIGINT,
    file_type TEXT,                  -- MIME type
    timestamp TIMESTAMP WITH TIME ZONE NOT NULL,
    processed BOOLEAN DEFAULT FALSE,
    metadata JSONB,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- ç´¢å¼•
CREATE INDEX idx_messages_line_message_id ON messages(line_message_id);
CREATE INDEX idx_messages_user_id ON messages(user_id);
CREATE INDEX idx_messages_message_type ON messages(message_type);
CREATE INDEX idx_messages_timestamp ON messages(timestamp DESC);
CREATE INDEX idx_messages_text_content_gin ON messages USING GIN(to_tsvector('simple', text_content));
```

**æ¬„ä½èªªæ˜**:
- `line_message_id`: LINE å¹³å°è¨Šæ¯å”¯ä¸€è­˜åˆ¥ç¢¼
- `user_id`: é—œè¯åˆ° users è¡¨çš„å¤–éµ
- `message_type`: è¨Šæ¯é¡å‹ï¼ˆtext/image/file/audio/videoï¼‰
- `text_content`: æ–‡å­—è¨Šæ¯å…§å®¹
- `file_id`: Supabase Storage æª”æ¡ˆ ID
- `file_name`: åŸå§‹æª”æ¡ˆåç¨±
- `file_path`: Storage ä¸­çš„æª”æ¡ˆè·¯å¾‘
- `file_size`: æª”æ¡ˆå¤§å°ï¼ˆbytesï¼‰
- `file_type`: MIME é¡å‹
- `timestamp`: è¨Šæ¯æ™‚é–“æˆ³ï¼ˆLINE æä¾›ï¼‰
- `processed`: è¨Šæ¯æ˜¯å¦å·²è™•ç†
- `metadata`: é¡å¤–çš„ JSON è³‡æ–™

#### è¡¨: message_limitsï¼ˆç³»çµ±é™åˆ¶è¡¨ï¼‰

```sql
CREATE TABLE message_limits (
    id SERIAL PRIMARY KEY,
    limit_type TEXT UNIQUE NOT NULL,  -- 'max_messages', 'max_users'
    limit_value INTEGER NOT NULL,
    current_count INTEGER DEFAULT 0,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- åˆå§‹è³‡æ–™
INSERT INTO message_limits (limit_type, limit_value) VALUES
('max_messages', 1000),
('max_users', 100);
```

#### è¡¨: system_statsï¼ˆç³»çµ±çµ±è¨ˆè¡¨ï¼‰

```sql
CREATE TABLE system_stats (
    id SERIAL PRIMARY KEY,
    stat_name TEXT UNIQUE NOT NULL,
    stat_value INTEGER NOT NULL,
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

### 8.2 Supabase Storage çµæ§‹

#### Bucket: line-files

```
line-files/
â”œâ”€â”€ images/                          # åœ–ç‰‡æª”æ¡ˆ
â”‚   â”œâ”€â”€ 1699123456789_image001.jpg
â”‚   â”œâ”€â”€ 1699123457890_photo.png
â”‚   â””â”€â”€ ...
â”œâ”€â”€ audio/                           # éŸ³è¨Šæª”æ¡ˆ
â”‚   â”œâ”€â”€ 1699123458901_voice.m4a
â”‚   â””â”€â”€ ...
â”œâ”€â”€ video/                           # è¦–è¨Šæª”æ¡ˆ
â”‚   â”œâ”€â”€ 1699123459012_video.mp4
â”‚   â””â”€â”€ ...
â”œâ”€â”€ documents/                       # æ–‡ä»¶æª”æ¡ˆ
â”‚   â”œâ”€â”€ pdf/
â”‚   â”‚   â”œâ”€â”€ 1699123460123_document.pdf
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ word/
â”‚   â”‚   â”œâ”€â”€ 1699123461234_report.docx
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ excel/
â”‚       â”œâ”€â”€ 1699123462345_data.xlsx
â”‚       â””â”€â”€ ...
â””â”€â”€ files/                           # å…¶ä»–æª”æ¡ˆ
    â””â”€â”€ ...
```

**Storage è¨­å®š**:
- Public access: å¦ï¼ˆé€éç°½å URL å­˜å–ï¼‰
- File size limit: 50MB
- Allowed MIME types: æ‰€æœ‰é¡å‹

### 8.3 API è³‡æ–™æ ¼å¼

#### GET /api/messages å›æ‡‰ç¯„ä¾‹

```json
{
  "success": true,
  "data": [
    {
      "id": 1,
      "line_message_id": "1234567890",
      "user_id": 1,
      "message_type": "text",
      "text_content": "æˆ‘è¦è¨‚è³¼å•†å“",
      "file_id": null,
      "file_name": null,
      "file_path": null,
      "file_size": null,
      "file_type": null,
      "timestamp": "2025-11-05T10:30:00.000Z",
      "processed": true,
      "metadata": {},
      "created_at": "2025-11-05T10:30:01.000Z",
      "user": {
        "id": 1,
        "line_user_id": "U1234567890abcdef",
        "display_name": "ç‹å°æ˜",
        "picture_url": "https://profile.line-scdn.net/...",
        "status_message": "Hello!",
        "language": "zh-TW",
        "group_display_name": "ç‹å°æ˜-è¨‚è³¼ç´€éŒ„",
        "customer_name": "ç‹æ›‰æ˜",
        "message_count": 15,
        "first_message_at": "2025-10-01T09:00:00.000Z",
        "last_message_at": "2025-11-05T10:30:00.000Z"
      }
    },
    {
      "id": 2,
      "message_type": "image",
      "text_content": null,
      "file_id": "abc123",
      "file_name": "product.jpg",
      "file_path": "images/1699123456789_product.jpg",
      "file_size": 245678,
      "file_type": "image/jpeg",
      "timestamp": "2025-11-05T10:31:00.000Z",
      "user": { /* ... */ }
    }
  ],
  "count": 2,
  "total": 1000
}
```

#### GET /api/stats å›æ‡‰ç¯„ä¾‹

```json
{
  "success": true,
  "data": {
    "totalMessages": 856,
    "totalUsers": 67,
    "totalFiles": 234,
    "limits": {
      "maxMessages": 1000,
      "maxUsers": 100,
      "messageUsagePercent": 85.6,
      "userUsagePercent": 67.0,
      "nearLimit": false
    }
  }
}
```

#### POST /api/customers/batch-update è«‹æ±‚ç¯„ä¾‹

```json
{
  "updates": [
    {
      "line_user_id": "U1234567890abcdef",
      "customer_name": "ç‹æ›‰æ˜"
    },
    {
      "line_user_id": "U9876543210fedcba",
      "customer_name": "æç¾ç²"
    }
  ]
}
```

---

## 9. ç”¨æˆ¶ä»‹é¢

### 9.1 ä¸»ä»‹é¢ (index.html)

#### é é¢çµæ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LINE è¨Šæ¯æ”¶é›†ç³»çµ±                          [ğŸ”„] [ğŸ“Š] [âš™ï¸] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  çµ±è¨ˆå„€è¡¨æ¿                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ ç¸½è¨Šæ¯æ•¸   â”‚ â”‚ ç¸½ç”¨æˆ¶æ•¸   â”‚ â”‚ ç¸½æª”æ¡ˆæ•¸   â”‚            â”‚
â”‚  â”‚    856     â”‚ â”‚     67     â”‚ â”‚    234     â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ è¨Šæ¯é™åˆ¶ 856/1000   â”‚ â”‚ ç”¨æˆ¶é™åˆ¶ 67/100     â”‚       â”‚
â”‚  â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 85.6%     â”‚ â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘ 67.0%      â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ğŸ“ è¨Šæ¯åˆ—è¡¨] [ğŸ‘¥ ç”¨æˆ¶åˆ—è¡¨] [ğŸ” æœå°‹]                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ğŸ“ è¨Šæ¯åˆ—è¡¨ é ç±¤                                          â”‚
â”‚                                                             â”‚
â”‚  ç¯©é¸: [å…¨éƒ¨ â–¾]  [ğŸ”„ é‡æ–°æ•´ç†]  [ğŸ“¥ åŒ¯å‡ºè³‡æ–™ â–¾]          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ§‘ ç‹å°æ˜  ğŸ·ï¸ ç‹å°æ˜-è¨‚è³¼ç´€éŒ„  2025-11-05 10:30      â”‚ â”‚
â”‚  â”‚ ğŸ“„ æˆ‘è¦è¨‚è³¼å•†å“                                       â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ ğŸ§‘ ç‹å°æ˜  ğŸ·ï¸ ç‹å°æ˜-è¨‚è³¼ç´€éŒ„  2025-11-05 10:31      â”‚ â”‚
â”‚  â”‚ ğŸ–¼ï¸ product.jpg (240 KB)  [â¬‡ï¸ ä¸‹è¼‰]                   â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ ğŸ§‘ æç¾ç²  ğŸ·ï¸ æç¾ç²-è©¢å•å€  2025-11-05 10:32        â”‚ â”‚
â”‚  â”‚ ğŸ“„ è«‹å•æœ‰ç¾è²¨å—ï¼Ÿ                                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  [â—€ ä¸Šä¸€é ] ç¬¬ 1 é  / å…± 10 é  [ä¸‹ä¸€é  â–¶]                 â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### åŠŸèƒ½èªªæ˜

1. **çµ±è¨ˆå„€è¡¨æ¿**ï¼ˆé ‚éƒ¨å€åŸŸï¼‰
   - é¡¯ç¤ºç¸½è¨Šæ¯æ•¸ã€ç¸½ç”¨æˆ¶æ•¸ã€ç¸½æª”æ¡ˆæ•¸
   - é¡¯ç¤ºè¨Šæ¯å’Œç”¨æˆ¶é™åˆ¶ä½¿ç”¨ç‡
   - é” 90% æ™‚ç´…è‰²è­¦å‘Š
   - è‡ªå‹•æ¯ 30 ç§’æ›´æ–°

2. **ä¸‰å¤§åŠŸèƒ½é ç±¤**

   **é ç±¤ 1: è¨Šæ¯åˆ—è¡¨**
   - é¡¯ç¤ºæ‰€æœ‰è¨Šæ¯ï¼ˆé è¨­è¼‰å…¥æœ€æ–° 1000 å‰‡ï¼‰
   - è¨Šæ¯é¡å‹ç¯©é¸ä¸‹æ‹‰é¸å–®
   - é‡æ–°æ•´ç†æŒ‰éˆ•
   - åŒ¯å‡ºè³‡æ–™ä¸‹æ‹‰é¸å–®ï¼ˆ6 ç¨®æ ¼å¼ï¼‰
   - è¨Šæ¯å¡ç‰‡é¡¯ç¤ºï¼š
     - ç”¨æˆ¶é ­åƒå’Œåç¨±
     - ç¾¤çµ„åç¨±ï¼ˆè—è‰²æ¨™ç±¤ ğŸ·ï¸ï¼‰
     - è¨Šæ¯æ™‚é–“
     - è¨Šæ¯å…§å®¹æˆ–æª”æ¡ˆè³‡è¨Š
     - æª”æ¡ˆä¸‹è¼‰æŒ‰éˆ•
   - åˆ†é å°èˆª

   **é ç±¤ 2: ç”¨æˆ¶åˆ—è¡¨**
   ```
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  ğŸ‘¥ ç”¨æˆ¶åˆ—è¡¨                                          â”‚
   â”‚                                                       â”‚
   â”‚  [ğŸ”„ é‡æ–°æ•´ç†]  [ğŸ‘¤ å®¢æˆ¶å§“åç®¡ç†]                    â”‚
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
   â”‚  â”‚ ğŸ§‘ ç‹å°æ˜          â”‚ â”‚ ğŸ§‘ æç¾ç²          â”‚      â”‚
   â”‚  â”‚ LINE ID: U123...   â”‚ â”‚ LINE ID: U987...   â”‚      â”‚
   â”‚  â”‚ ğŸ·ï¸ ç‹å°æ˜-è¨‚è³¼ç´€éŒ„ â”‚ â”‚ ğŸ·ï¸ æç¾ç²-è©¢å•å€   â”‚      â”‚
   â”‚  â”‚ ğŸ‘¤ ç‹æ›‰æ˜ (çœŸå¯¦å§“å)â”‚ â”‚ ğŸ‘¤ (æœªè¨­å®š)        â”‚      â”‚
   â”‚  â”‚ ğŸ“Š è¨Šæ¯æ•¸: 15      â”‚ â”‚ ğŸ“Š è¨Šæ¯æ•¸: 8       â”‚      â”‚
   â”‚  â”‚ ğŸ“… 2025-10-01 åŠ å…¥ â”‚ â”‚ ğŸ“… 2025-10-15 åŠ å…¥ â”‚      â”‚
   â”‚  â”‚ [æŸ¥çœ‹è¨Šæ¯]         â”‚ â”‚ [æŸ¥çœ‹è¨Šæ¯]         â”‚      â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   ```
   - å¡ç‰‡å¼é¡¯ç¤ºæ‰€æœ‰ç”¨æˆ¶
   - é¡¯ç¤ºç”¨æˆ¶é ­åƒã€åç¨±ã€LINE ID
   - é¡¯ç¤ºç¾¤çµ„åç¨±ï¼ˆç¾¤çµ„é¡¯ç¤ºåç¨±ï¼‰
   - é¡¯ç¤ºå®¢æˆ¶çœŸå¯¦å§“åï¼ˆè‹¥å·²è¨­å®šï¼‰
   - é¡¯ç¤ºè¨Šæ¯æ•¸é‡å’ŒåŠ å…¥æ™‚é–“
   - é»æ“Šã€ŒæŸ¥çœ‹è¨Šæ¯ã€æŒ‰éˆ•æŸ¥çœ‹è©²ç”¨æˆ¶æ‰€æœ‰è¨Šæ¯
   - ã€Œå®¢æˆ¶å§“åç®¡ç†ã€æŒ‰éˆ•ï¼ˆé–‹å•Ÿæ–°è¦–çª—ï¼‰

   **é ç±¤ 3: æœå°‹**
   ```
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  ğŸ” æœå°‹                                              â”‚
   â”‚                                                       â”‚
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
   â”‚  â”‚ æœå°‹... (ç”¨æˆ¶åç¨±ã€ç¾¤çµ„åç¨±ã€è¨Šæ¯å…§å®¹ã€æª”æ¡ˆåç¨±)â”‚ â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
   â”‚                                                       â”‚
   â”‚  æ‰¾åˆ° 3 å€‹çµæœ                                        â”‚
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
   â”‚  â”‚ ğŸ§‘ ç‹å°æ˜  ğŸ·ï¸ ç‹å°æ˜-è¨‚è³¼ç´€éŒ„                     â”‚â”‚
   â”‚  â”‚ ğŸ“„ æˆ‘è¦è¨‚è³¼å•†å“                                   â”‚â”‚
   â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
   â”‚  â”‚ ğŸ§‘ æç¾ç²  ğŸ·ï¸ æç¾ç²-è©¢å•å€                       â”‚â”‚
   â”‚  â”‚ ğŸ“„ è«‹å•é€™å€‹å•†å“æœ‰ç¾è²¨å—ï¼Ÿ                         â”‚â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   ```
   - æœå°‹è¼¸å…¥æ¡†ï¼ˆå³æ™‚æœå°‹ï¼‰
   - æœå°‹ç¯„åœï¼šç”¨æˆ¶åç¨±ã€ç¾¤çµ„åç¨±ã€è¨Šæ¯å…§å®¹ã€æª”æ¡ˆåç¨±
   - é¡¯ç¤ºæœå°‹çµæœæ•¸é‡
   - é¡¯ç¤ºç¬¦åˆæ¢ä»¶çš„è¨Šæ¯
   - ç›®å‰ç‚ºå‰ç«¯å¯¦ä½œï¼ˆåƒ…æœå°‹å·²è¼‰å…¥çš„ 1000 å‰‡è¨Šæ¯ï¼‰

### 9.2 å®¢æˆ¶å§“åç®¡ç†ä»‹é¢ (customer-management.html)

#### é é¢çµæ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‘¤ å®¢æˆ¶å§“åç®¡ç†                      [é—œé–‰è¦–çª—]            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  çµ±è¨ˆè³‡è¨Š                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ ç¸½å®¢æˆ¶æ•¸ â”‚ â”‚ å·²è¨­å®š   â”‚ â”‚ å¾…è¨­å®š   â”‚ â”‚ å®Œæˆç‡   â”‚     â”‚
â”‚  â”‚   67     â”‚ â”‚   45     â”‚ â”‚   22     â”‚ â”‚  67.2%   â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ğŸ”„ é‡æ–°æ•´ç†]  [ğŸ“¥ åŒ¯å‡º CSV]  [ğŸ“¤ åŒ¯å…¥ CSV]              â”‚
â”‚  [ğŸ’¾ æ‰¹é‡å„²å­˜]                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å¾…è¨­å®šå§“åçš„å®¢æˆ¶åˆ—è¡¨                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ§‘ ç‹å°æ˜                                             â”‚ â”‚
â”‚  â”‚ LINE ID: U1234567890abcdef                           â”‚ â”‚
â”‚  â”‚ ğŸ·ï¸ ç¾¤çµ„åç¨±: ç‹å°æ˜-è¨‚è³¼ç´€éŒ„                          â”‚ â”‚
â”‚  â”‚ ğŸ“Š è¨Šæ¯æ•¸: 15                                         â”‚ â”‚
â”‚  â”‚                                                       â”‚ â”‚
â”‚  â”‚ æœ€è¿‘è¨Šæ¯åƒè€ƒ:                                         â”‚ â”‚
â”‚  â”‚  1. æˆ‘æ˜¯ç‹æ›‰æ˜ï¼Œæƒ³è¨‚è³¼å•†å“                            â”‚ â”‚
â”‚  â”‚  2. æˆ‘çš„é›»è©±æ˜¯ 0912-345-678                          â”‚ â”‚
â”‚  â”‚  3. è«‹å•æœ‰å„ªæƒ å—ï¼Ÿ                                    â”‚ â”‚
â”‚  â”‚                                                       â”‚ â”‚
â”‚  â”‚ å®¢æˆ¶çœŸå¯¦å§“å: [__________] (å»ºè­°: ç‹æ›‰æ˜)            â”‚ â”‚
â”‚  â”‚ [ğŸ’¾ å„²å­˜]                                             â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ ğŸ§‘ æç¾ç²                                             â”‚ â”‚
â”‚  â”‚ LINE ID: U9876543210fedcba                           â”‚ â”‚
â”‚  â”‚ ğŸ·ï¸ ç¾¤çµ„åç¨±: æç¾ç²-è©¢å•å€                            â”‚ â”‚
â”‚  â”‚ ğŸ“Š è¨Šæ¯æ•¸: 8                                          â”‚ â”‚
â”‚  â”‚                                                       â”‚ â”‚
â”‚  â”‚ æœ€è¿‘è¨Šæ¯åƒè€ƒ:                                         â”‚ â”‚
â”‚  â”‚  1. ä½ å¥½ï¼Œæˆ‘å«æç¾ç²                                  â”‚ â”‚
â”‚  â”‚  2. æƒ³äº†è§£å•†å“ç´°ç¯€                                    â”‚ â”‚
â”‚  â”‚  3. è¬è¬                                              â”‚ â”‚
â”‚  â”‚                                                       â”‚ â”‚
â”‚  â”‚ å®¢æˆ¶çœŸå¯¦å§“å: [__________] (å»ºè­°: æç¾ç²)            â”‚ â”‚
â”‚  â”‚ [ğŸ’¾ å„²å­˜]                                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### åŠŸèƒ½èªªæ˜

1. **çµ±è¨ˆå„€è¡¨æ¿**
   - ç¸½å®¢æˆ¶æ•¸
   - å·²è¨­å®šå§“åçš„å®¢æˆ¶æ•¸
   - å¾…è¨­å®šå§“åçš„å®¢æˆ¶æ•¸
   - å®Œæˆç‡ç™¾åˆ†æ¯”
   - è‡ªå‹•æ›´æ–°

2. **åŠŸèƒ½æŒ‰éˆ•**
   - é‡æ–°æ•´ç†ï¼šé‡æ–°è¼‰å…¥å®¢æˆ¶åˆ—è¡¨
   - åŒ¯å‡º CSVï¼šå°‡å®¢æˆ¶è³‡æ–™åŒ¯å‡ºç‚º CSV æª”æ¡ˆ
   - åŒ¯å…¥ CSVï¼šå¾ CSV æª”æ¡ˆæ‰¹é‡åŒ¯å…¥å®¢æˆ¶å§“å
   - æ‰¹é‡å„²å­˜ï¼šä¸€æ¬¡å„²å­˜æ‰€æœ‰è¼¸å…¥çš„å§“å

3. **å®¢æˆ¶åˆ—è¡¨**
   - åƒ…é¡¯ç¤ºéœ€è¦è¨­å®šå§“åçš„å®¢æˆ¶ï¼ˆcustomer_name ç‚ºç©ºï¼‰
   - æ¯å€‹å®¢æˆ¶å¡ç‰‡åŒ…å«ï¼š
     - ç”¨æˆ¶åŸºæœ¬è³‡æ–™ï¼ˆåç¨±ã€LINE IDï¼‰
     - ç¾¤çµ„åç¨±ï¼ˆå¦‚æœ‰ï¼‰
     - è¨Šæ¯æ•¸é‡
     - æœ€è¿‘ 3 å‰‡è¨Šæ¯ä½œç‚ºåƒè€ƒ
     - æ™ºèƒ½å§“åå»ºè­°ï¼ˆå¦‚æœ‰åˆ†æçµæœï¼‰
     - å§“åè¼¸å…¥æ¡†
     - å–®å€‹å„²å­˜æŒ‰éˆ•

4. **æ™ºèƒ½å§“åå»ºè­°**ï¼ˆè¼”åŠ©åŠŸèƒ½ï¼‰
   - å¾è¨Šæ¯å…§å®¹åˆ†æå¯èƒ½çš„çœŸå¯¦å§“å
   - åŒ¹é…æ¨¡å¼ï¼š
     - "æˆ‘æ˜¯XXX"ã€"æˆ‘å«XXX"ã€"å«æˆ‘XXX"
     - "å§“å: XXX"ã€"åå­—: XXX"
   - å¾ LINE displayName æå–çœŸå¯¦å§“å
   - åƒ…ä½œç‚ºå»ºè­°ï¼Œæœ€çµ‚éœ€äººå·¥ç¢ºèª

5. **CSV åŒ¯å…¥/åŒ¯å‡º**
   - åŒ¯å‡ºæ ¼å¼ï¼š
     ```csv
     LINE ID,é¡¯ç¤ºåç¨±,ç¾¤çµ„åç¨±,å®¢æˆ¶å§“å,è¨Šæ¯æ•¸é‡
     U1234567890abcdef,ç‹å°æ˜,ç‹å°æ˜-è¨‚è³¼ç´€éŒ„,,15
     U9876543210fedcba,æç¾ç²,æç¾ç²-è©¢å•å€,,8
     ```
   - åŒ¯å…¥ï¼šå¡«å¯«ã€Œå®¢æˆ¶å§“åã€æ¬„ä½å¾ŒåŒ¯å…¥æ›´æ–°

### 9.3 UI/UX è¨­è¨ˆåŸå‰‡

1. **ç°¡æ½”æ˜“ç”¨**
   - æ‰å¹³åŒ–è¨­è¨ˆ
   - æ¸…æ™°çš„è¦–è¦ºå±¤ç´š
   - ç›´è§€çš„æ“ä½œæµç¨‹
   - æœ€å°‘çš„é»æ“Šæ¬¡æ•¸

2. **éŸ¿æ‡‰å¼è¨­è¨ˆ**
   - æ”¯æ´æ¡Œé¢ï¼ˆ1920pxï¼‰
   - æ”¯æ´å¹³æ¿ï¼ˆ768pxï¼‰
   - æ”¯æ´æ‰‹æ©Ÿï¼ˆ375pxï¼‰
   - è‡ªé©æ‡‰ä½ˆå±€

3. **å³æ™‚å›é¥‹**
   - æ“ä½œæˆåŠŸé€šçŸ¥ï¼ˆç¶ è‰²ï¼‰
   - éŒ¯èª¤è¨Šæ¯é€šçŸ¥ï¼ˆç´…è‰²ï¼‰
   - è³‡è¨Šæç¤ºé€šçŸ¥ï¼ˆè—è‰²ï¼‰
   - è¼‰å…¥ç‹€æ…‹æç¤º

4. **è³‡è¨Šå¯†åº¦**
   - é©ç•¶çš„è³‡è¨Šå¯†åº¦
   - é‡è¦è³‡è¨Šçªå‡ºé¡¯ç¤º
   - æ¬¡è¦è³‡è¨Šé©ç•¶éš±è—
   - é¿å…è³‡è¨Šéè¼‰

5. **ç„¡éšœç¤™è¨­è¨ˆ**
   - èªæ„åŒ– HTML
   - é©ç•¶çš„å°æ¯”åº¦
   - å¯è®€çš„å­—é«”å¤§å°
   - éµç›¤å°èˆªæ”¯æ´ï¼ˆåŸºæœ¬ï¼‰

---

## 10. ç³»çµ±é™åˆ¶

### 10.1 æŠ€è¡“é™åˆ¶

1. **LINE API é™åˆ¶**
   - âŒ ç„¡æ³•ç²å– LINE å¾Œå°ã€Œè¯çµ¡äººå§“åã€
     - LINE Profile API åƒ…æä¾›ç”¨æˆ¶å…¬é–‹è³‡æ–™ï¼ˆdisplayNameï¼‰
     - ç„¡æ³•ç²å– LINE Official Account Manager ä¸­è¨­å®šçš„è¯çµ¡äººå§“å
     - è§£æ±ºæ–¹æ¡ˆï¼šå»ºç«‹ç¨ç«‹çš„å®¢æˆ¶å§“åç®¡ç†ç³»çµ±

   - âš ï¸ Profile API ç²å–é™åˆ¶
     - ç”¨æˆ¶å°é– Bot æ™‚ç„¡æ³•ç²å– Profile
     - ç”¨æˆ¶ä¸å­˜åœ¨æ™‚è¿”å›éŒ¯èª¤
     - éœ€è¦é©ç•¶çš„éŒ¯èª¤è™•ç†

   - âš ï¸ Webhook å›æ‡‰æ™‚é–“é™åˆ¶
     - å¿…é ˆåœ¨ 3 ç§’å…§å›æ‡‰ 200 OK
     - å¦å‰‡ LINE æœƒé‡è©¦ï¼ˆå¯èƒ½é€ æˆé‡è¤‡è™•ç†ï¼‰
     - é•·æ™‚é–“è™•ç†éœ€è¦ç•°æ­¥åŒ–

2. **Supabase å…è²»æ–¹æ¡ˆé™åˆ¶**
   - è³‡æ–™åº«ï¼š500 MB å„²å­˜ç©ºé–“
   - Storageï¼š1 GB å„²å­˜ç©ºé–“
   - API è«‹æ±‚ï¼šç„¡é™åˆ¶ï¼ˆæœ‰ rate limitï¼‰
   - è³‡æ–™å‚³è¼¸ï¼š2 GB/æœˆ
   - è¶…å‡ºéœ€è¦å‡ç´šè‡³ä»˜è²»æ–¹æ¡ˆ

3. **Render å…è²»æ–¹æ¡ˆé™åˆ¶**
   - 15 åˆ†é˜ç„¡æ´»å‹•å¾Œè‡ªå‹•ä¼‘çœ 
   - å–šé†’æ™‚é–“ï¼š30-60 ç§’
   - 750 å°æ™‚/æœˆï¼ˆç´„ 31 å¤©ï¼‰
   - å»ºè­°ï¼šç”Ÿç”¢ç’°å¢ƒå‡ç´šè‡³ $7/æœˆæ–¹æ¡ˆ

4. **æª”æ¡ˆè™•ç†é™åˆ¶**
   - æª”æ¡ˆå¤§å°é™åˆ¶ï¼š50 MB
   - è¶…å¤§æª”æ¡ˆå¯èƒ½é€ æˆè¨˜æ†¶é«”å•é¡Œ
   - ZIP åŒ¯å‡ºæ™‚è¨˜æ†¶é«”ä½¿ç”¨è¼ƒé«˜

5. **å‰ç«¯æœå°‹é™åˆ¶**
   - ç›®å‰åƒ…æœå°‹å·²è¼‰å…¥çš„ 1000 å‰‡è¨Šæ¯
   - ç„¡æ³•æœå°‹æ‰€æœ‰æ­·å²è³‡æ–™
   - éœ€è¦å¾Œç«¯å¯¦ä½œæ‰èƒ½æ”¯æ´å¤§é‡è³‡æ–™æœå°‹

### 10.2 åŠŸèƒ½é™åˆ¶

1. **è³‡æ–™é‡é™åˆ¶**
   - é è¨­æœ€å¤§è¨Šæ¯æ•¸ï¼š1000 å‰‡
   - é è¨­æœ€å¤§ç”¨æˆ¶æ•¸ï¼š100 ä½
   - è¶…å‡ºé™åˆ¶å¾Œæ‹’çµ•æ–°è³‡æ–™
   - å¯èª¿æ•´ç’°å¢ƒè®Šæ•¸ï¼ˆä½†å—è³‡æ–™åº«å®¹é‡é™åˆ¶ï¼‰

2. **è¨Šæ¯é¡å‹æ”¯æ´**
   - âœ… æ–‡å­—è¨Šæ¯
   - âœ… åœ–ç‰‡è¨Šæ¯
   - âœ… æª”æ¡ˆè¨Šæ¯
   - âœ… éŸ³è¨Šè¨Šæ¯
   - âœ… è¦–è¨Šè¨Šæ¯
   - âŒ ä½ç½®è¨Šæ¯ï¼ˆæœªå¯¦ä½œï¼‰
   - âŒ è²¼åœ–è¨Šæ¯ï¼ˆæœªå¯¦ä½œï¼‰
   - âŒ è¯çµ¡äººå¡ç‰‡ï¼ˆæœªå¯¦ä½œï¼‰

3. **ç”¨æˆ¶ç®¡ç†é™åˆ¶**
   - ç„¡æ³•ä¸»å‹•æ¨é€è¨Šæ¯çµ¦ç”¨æˆ¶ï¼ˆLINE API é™åˆ¶ï¼‰
   - ç„¡æ³•æŸ¥çœ‹ç”¨æˆ¶æ˜¯å¦å°é– Bot
   - ç„¡æ³•ç²å–ç”¨æˆ¶å¥½å‹åˆ—è¡¨

4. **æœå°‹åŠŸèƒ½é™åˆ¶**
   - å‰ç«¯å¯¦ä½œï¼Œåƒ…æœå°‹å·²è¼‰å…¥è³‡æ–™
   - ä¸æ”¯æ´é€²éšç¯©é¸ï¼ˆæ—¥æœŸç¯„åœã€æª”æ¡ˆé¡å‹ç­‰ï¼‰
   - ä¸æ”¯æ´æ­£å‰‡è¡¨é”å¼æœå°‹
   - ä¸æ”¯æ´å…¨æ–‡ç´¢å¼•æœå°‹

5. **çµ±è¨ˆåŠŸèƒ½é™åˆ¶**
   - åƒ…æä¾›åŸºæœ¬çµ±è¨ˆè³‡è¨Š
   - ç„¡è¦–è¦ºåŒ–åœ–è¡¨
   - ç„¡å®¢æˆ¶è¡Œç‚ºåˆ†æ
   - ç„¡æ™‚é–“è¶¨å‹¢åˆ†æ

### 10.3 å®‰å…¨æ€§é™åˆ¶

1. **èº«ä»½é©—è­‰**
   - âš ï¸ æŸ¥è©¢ä»‹é¢ç„¡èº«ä»½é©—è­‰
   - âš ï¸ API ç«¯é»ç„¡ API Key é©—è­‰
   - å»ºè­°ï¼šåƒ…é™å…§éƒ¨ç¶²è·¯æˆ–å¢åŠ èº«ä»½é©—è­‰

2. **æ¬Šé™ç®¡ç†**
   - ç„¡è§’è‰²æ¬Šé™ç³»çµ±
   - æ‰€æœ‰æ“ä½œè€…æ¬Šé™ç›¸åŒ
   - ç„¡æ“ä½œæ—¥èªŒè¨˜éŒ„

3. **è³‡æ–™å®‰å…¨**
   - ç„¡è³‡æ–™åŠ å¯†ï¼ˆå„²å­˜å±¤ï¼‰
   - ç„¡è‡ªå‹•å‚™ä»½æ©Ÿåˆ¶ï¼ˆä¾è³´ Supabaseï¼‰
   - ç„¡è³‡æ–™åˆªé™¤ä¿è­·

### 10.4 ä½¿ç”¨é™åˆ¶å»ºè­°

**é©ç”¨å ´æ™¯**:
- âœ… å°å‹ä¼æ¥­ï¼ˆ< 100 å®¢æˆ¶ï¼‰
- âœ… å€‹äººå·¥ä½œå®¤
- âœ… æ¸¬è©¦ç’°å¢ƒ
- âœ… æ¦‚å¿µé©—è­‰ï¼ˆPOCï¼‰

**ä¸é©ç”¨å ´æ™¯**:
- âŒ å¤§å‹ä¼æ¥­ï¼ˆ> 1000 å®¢æˆ¶ï¼‰
- âŒ é«˜æµé‡å ´æ™¯ï¼ˆ> 100 è¨Šæ¯/åˆ†é˜ï¼‰
- âŒ éœ€è¦å³æ™‚åˆ†æçš„å ´æ™¯
- âŒ éœ€è¦è¤‡é›œæ¬Šé™ç®¡ç†çš„å ´æ™¯
- âŒ éœ€è¦åˆè¦èªè­‰çš„å ´æ™¯ï¼ˆé‡‘èã€é†«ç™‚ç­‰ï¼‰

---

## 11. æ•´åˆèˆ‡ä¾è³´

### 11.1 LINE Platform

**ä¾è³´æœå‹™**:
1. **LINE Messaging API**
   - Webhook äº‹ä»¶æ¨é€
   - è¨Šæ¯å…§å®¹ä¸‹è¼‰
   - éœ€è¦ï¼šChannel Access Token, Channel Secret

2. **LINE Profile API**
   - ç²å–ç”¨æˆ¶å…¬é–‹è³‡æ–™
   - displayName, pictureUrl, statusMessage, language
   - é™åˆ¶ï¼šç”¨æˆ¶å°é–æ™‚ç„¡æ³•ç²å–

3. **LINE Bot API**
   - `getGroupSummary(groupId)` - ç²å–ç¾¤çµ„è³‡è¨Š
   - è¿”å›ç¾¤çµ„åç¨±å’Œæˆå“¡æ•¸
   - é™åˆ¶ï¼šåƒ…é©ç”¨æ–¼ç¾¤çµ„èŠå¤©

**æ•´åˆæ–¹å¼**:
```javascript
// Webhook è¨­å®š
app.post('/webhook', line.middleware(config), async (req, res) => {
    const events = req.body.events;
    await Promise.all(events.map(handleEvent));
    res.status(200).send('OK');
});

// Profile API
const profile = await client.getProfile(userId);

// Group API
const groupSummary = await client.getGroupSummary(groupId);
```

### 11.2 Supabase Platform

**ä¾è³´æœå‹™**:
1. **PostgreSQL Database**
   - å„²å­˜ç”¨æˆ¶è³‡æ–™ã€è¨Šæ¯è¨˜éŒ„
   - RPC å‡½æ•¸åŸ·è¡Œ
   - éœ€è¦ï¼šSupabase URL, Service Key

2. **Supabase Storage**
   - å„²å­˜æª”æ¡ˆï¼ˆåœ–ç‰‡ã€æ–‡ä»¶ã€éŸ³è¦–è¨Šï¼‰
   - ç°½å URL ç”Ÿæˆ
   - Bucket: line-files

**æ•´åˆæ–¹å¼**:
```javascript
// Database
const { data, error } = await supabase
    .from('users')
    .select('*')
    .eq('line_user_id', lineUserId)
    .single();

// Storage
const { data, error } = await supabase.storage
    .from('line-files')
    .upload(filePath, fileBuffer, {
        contentType: mimeType
    });

// RPC
const { data, error } = await supabase
    .rpc('can_accept_new_user', { new_line_user_id: lineUserId });
```

### 11.3 Render.com éƒ¨ç½²

**ä¾è³´æœå‹™**:
- **Web Service**: é‹è¡Œ Node.js æ‡‰ç”¨ç¨‹å¼
- **ç’°å¢ƒè®Šæ•¸ç®¡ç†**: å„²å­˜æ•æ„Ÿè³‡è¨Š
- **è‡ªå‹•éƒ¨ç½²**: GitHub é€£å‹•

**éƒ¨ç½²è¨­å®š**:
```yaml
# render.yaml
services:
  - type: web
    name: line-message-collector
    env: node
    buildCommand: npm install
    startCommand: npm start
    envVars:
      - key: NODE_ENV
        value: production
      # å…¶ä»–ç’°å¢ƒè®Šæ•¸åœ¨ Render Dashboard è¨­å®š
```

### 11.4 å¤–éƒ¨ä¾è³´å¥—ä»¶

**æ ¸å¿ƒä¾è³´**:
```json
{
  "dependencies": {
    "@line/bot-sdk": "^7.5.2",
    "@supabase/supabase-js": "^2.38.0",
    "express": "^4.18.2",
    "dotenv": "^16.3.1",
    "axios": "^1.6.0",
    "cors": "^2.8.5",
    "multer": "^1.4.5",
    "csv-writer": "^1.6.0",
    "exceljs": "^4.4.0",
    "archiver": "^6.0.1",
    "pdfkit": "^0.14.0"
  },
  "devDependencies": {
    "nodemon": "^3.0.1"
  }
}
```

### 11.5 ä¾è³´é¢¨éšªèˆ‡æ›¿ä»£æ–¹æ¡ˆ

| ä¾è³´æœå‹™ | é¢¨éšª | æ›¿ä»£æ–¹æ¡ˆ |
|---------|------|---------|
| LINE Messaging API | æœå‹™ä¸­æ–·ã€API è®Šæ›´ | ç„¡ï¼ˆæ ¸å¿ƒä¾è³´ï¼‰ |
| Supabase | æœå‹™ä¸­æ–·ã€å…è²»æ–¹æ¡ˆé™åˆ¶ | Firebase, AWS RDS + S3, MongoDB Atlas |
| Render.com | å…è²»æ–¹æ¡ˆé™åˆ¶ã€æœå‹™ä¸­æ–· | Heroku, Railway, Fly.io, AWS Elastic Beanstalk |

---

## 12. éƒ¨ç½²æ¶æ§‹

### 12.1 éƒ¨ç½²æµç¨‹

```
é–‹ç™¼ç’°å¢ƒ â†’ GitHub â†’ Render.com â†’ ç”Ÿç”¢ç’°å¢ƒ
```

**æ­¥é©Ÿèªªæ˜**:

1. **æœ¬åœ°é–‹ç™¼**
   ```bash
   # å®‰è£ä¾è³´
   npm install

   # æœ¬åœ°æ¸¬è©¦
   npm run dev

   # æäº¤ä»£ç¢¼
   git add .
   git commit -m "Feature: ..."
   git push origin main
   ```

2. **GitHub å„²å­˜åº«**
   - ä»£ç¢¼è¨—ç®¡
   - ç‰ˆæœ¬æ§åˆ¶
   - Render è‡ªå‹•æ‹‰å–

3. **Render è‡ªå‹•éƒ¨ç½²**
   - æª¢æ¸¬åˆ° GitHub æ¨é€
   - è‡ªå‹•åŸ·è¡Œ `npm install`
   - å•Ÿå‹•æ‡‰ç”¨ç¨‹å¼ `npm start`
   - ç”Ÿæˆéƒ¨ç½² URL

4. **LINE Developer Console è¨­å®š**
   - å–å¾— Render Webhook URL
   - è¨­å®šåˆ° LINE Bot Webhook URL
   - é©—è­‰ Webhook

### 12.2 ç’°å¢ƒé…ç½®

**é–‹ç™¼ç’°å¢ƒ (.env.development)**:
```env
NODE_ENV=development
PORT=3000

LINE_CHANNEL_ACCESS_TOKEN=<dev_token>
LINE_CHANNEL_SECRET=<dev_secret>

SUPABASE_URL=<dev_supabase_url>
SUPABASE_ANON_KEY=<dev_anon_key>
SUPABASE_SERVICE_KEY=<dev_service_key>

MAX_MESSAGES=100
MAX_USERS=10
```

**ç”Ÿç”¢ç’°å¢ƒ (Render Environment Variables)**:
```env
NODE_ENV=production

LINE_CHANNEL_ACCESS_TOKEN=<prod_token>
LINE_CHANNEL_SECRET=<prod_secret>

SUPABASE_URL=<prod_supabase_url>
SUPABASE_ANON_KEY=<prod_anon_key>
SUPABASE_SERVICE_KEY=<prod_service_key>

MAX_MESSAGES=1000
MAX_USERS=100
```

### 12.3 è³‡æ–™åº«é·ç§»

**åˆå§‹åŒ–è³‡æ–™åº«**:
```sql
-- å»ºç«‹ users è¡¨
CREATE TABLE users (...);

-- å»ºç«‹ messages è¡¨
CREATE TABLE messages (...);

-- å»ºç«‹ message_limits è¡¨
CREATE TABLE message_limits (...);

-- å»ºç«‹ RPC å‡½æ•¸
CREATE OR REPLACE FUNCTION can_accept_new_user(...);
CREATE OR REPLACE FUNCTION check_message_limits(...);

-- å»ºç«‹ç´¢å¼•
CREATE INDEX idx_users_line_user_id ON users(line_user_id);
CREATE INDEX idx_messages_user_id ON messages(user_id);
```

**ç‰ˆæœ¬ç®¡ç†**:
- ä½¿ç”¨ `migrations/` ç›®éŒ„ç®¡ç†è³‡æ–™åº«è®Šæ›´
- æ¯å€‹é·ç§»æª”æ¡ˆå‘½åï¼š`YYYYMMDD_description.sql`
- æ‰‹å‹•åŸ·è¡Œé·ç§»ï¼ˆé€é Supabase Dashboardï¼‰

### 12.4 ç›£æ§èˆ‡æ—¥èªŒ

**æ‡‰ç”¨ç¨‹å¼æ—¥èªŒ**:
```javascript
// éŒ¯èª¤æ—¥èªŒ
console.error('[ERROR]', timestamp, errorMessage, stackTrace);

// è³‡è¨Šæ—¥èªŒ
console.log('[INFO]', timestamp, message);

// Webhook æ—¥èªŒ
console.log('[WEBHOOK]', messageType, userId, timestamp);
```

**Render ç›£æ§**:
- Render Dashboard æŸ¥çœ‹æ—¥èªŒ
- å¥åº·æª¢æŸ¥ç«¯é»ï¼š`GET /health`
- è‡ªå‹•é‡å•Ÿï¼ˆå´©æ½°æ™‚ï¼‰

**Supabase ç›£æ§**:
- Supabase Dashboard æŸ¥çœ‹è³‡æ–™åº«ç‹€æ…‹
- Storage ä½¿ç”¨é‡ç›£æ§
- API ä½¿ç”¨é‡ç›£æ§

### 12.5 å‚™ä»½èˆ‡æ¢å¾©

**è³‡æ–™å‚™ä»½**:
1. **Supabase è‡ªå‹•å‚™ä»½**
   - å…è²»æ–¹æ¡ˆï¼šç„¡è‡ªå‹•å‚™ä»½
   - ä»˜è²»æ–¹æ¡ˆï¼šæ¯æ—¥è‡ªå‹•å‚™ä»½

2. **æ‰‹å‹•å‚™ä»½**
   ```bash
   # åŒ¯å‡ºè³‡æ–™åº«ï¼ˆé€é Supabase CLIï¼‰
   supabase db dump -f backup.sql

   # åŒ¯å‡º Storageï¼ˆä½¿ç”¨åŒ¯å‡ºåŠŸèƒ½ï¼‰
   # é€é /api/export/images/zip ä¸‹è¼‰æ‰€æœ‰åœ–ç‰‡
   ```

**è³‡æ–™æ¢å¾©**:
```bash
# é‚„åŸè³‡æ–™åº«
supabase db reset
psql -h db.xxx.supabase.co -U postgres -d postgres -f backup.sql

# é‚„åŸ Storage
# éœ€è¦æ‰‹å‹•ä¸Šå‚³æª”æ¡ˆåˆ° Supabase Storage
```

### 12.6 æ“´å±•å»ºè­°

**å‚ç›´æ“´å±•**ï¼ˆæå‡å–®ä¸€ä¼ºæœå™¨æ•ˆèƒ½ï¼‰:
- Render: å‡ç´šè‡³æ›´é«˜è¦æ ¼æ–¹æ¡ˆ
- Supabase: å‡ç´šè‡³ Pro æ–¹æ¡ˆï¼ˆ8 GB RAM, æ›´é«˜ IOPSï¼‰

**æ°´å¹³æ“´å±•**ï¼ˆå¢åŠ ä¼ºæœå™¨æ•¸é‡ï¼‰:
- ç›®å‰æ¶æ§‹ä¸æ”¯æ´æ°´å¹³æ“´å±•
- éœ€è¦ï¼š
  - è² è¼‰å¹³è¡¡å™¨ï¼ˆLoad Balancerï¼‰
  - è³‡æ–™åº«é€£ç·šæ± ï¼ˆConnection Poolingï¼‰
  - Session ç®¡ç†ï¼ˆRedisï¼‰
  - æª”æ¡ˆå„²å­˜æ”¹ç”¨ CDN

---

## 13. æˆåŠŸæŒ‡æ¨™

### 13.1 é—œéµç¸¾æ•ˆæŒ‡æ¨™ï¼ˆKPIï¼‰

**æŠ€è¡“æŒ‡æ¨™**:
| æŒ‡æ¨™ | ç›®æ¨™å€¼ | æ¸¬é‡æ–¹å¼ |
|-----|--------|---------|
| è¨Šæ¯æ¥æ”¶æˆåŠŸç‡ | > 99% | (æˆåŠŸæ¥æ”¶è¨Šæ¯æ•¸ / ç¸½è¨Šæ¯æ•¸) Ã— 100% |
| API éŸ¿æ‡‰æ™‚é–“ | < 2 ç§’ | å¹³å‡ API ç«¯é»éŸ¿æ‡‰æ™‚é–“ |
| ç³»çµ±å¯ç”¨æ€§ | > 99% | (æ­£å¸¸é‹è¡Œæ™‚é–“ / ç¸½æ™‚é–“) Ã— 100% |
| æª”æ¡ˆä¸Šå‚³æˆåŠŸç‡ | > 98% | (æˆåŠŸä¸Šå‚³æª”æ¡ˆæ•¸ / ç¸½æª”æ¡ˆæ•¸) Ã— 100% |
| éŒ¯èª¤ç‡ | < 1% | (éŒ¯èª¤è«‹æ±‚æ•¸ / ç¸½è«‹æ±‚æ•¸) Ã— 100% |

**æ¥­å‹™æŒ‡æ¨™**:
| æŒ‡æ¨™ | ç›®æ¨™å€¼ | æ¸¬é‡æ–¹å¼ |
|-----|--------|---------|
| ç”¨æˆ¶æ¡ç”¨ç‡ | > 80% | (ä½¿ç”¨ç³»çµ±çš„å®¢æœ / ç¸½å®¢æœ) Ã— 100% |
| è³‡æ–™å®Œæ•´æ€§ | 100% | æ‰€æœ‰æ”¶åˆ°çš„è¨Šæ¯éƒ½æœ‰å®Œæ•´è¨˜éŒ„ |
| å®¢æˆ¶å§“åè¨­å®šå®Œæˆç‡ | > 70% | (å·²è¨­å®šå§“åå®¢æˆ¶ / ç¸½å®¢æˆ¶) Ã— 100% |
| æ¯æœˆæ´»èºç”¨æˆ¶æ•¸ | > 50 | æ¯æœˆç™¼é€è¨Šæ¯çš„ LINE ç”¨æˆ¶æ•¸ |
| è³‡æ–™åŒ¯å‡ºä½¿ç”¨ç‡ | > 30% | (æ¯æœˆåŒ¯å‡ºæ¬¡æ•¸ / ç¸½ç”¨æˆ¶æ•¸) Ã— 30 |

### 13.2 ç”¨æˆ¶æ»¿æ„åº¦æŒ‡æ¨™

**å¯ç”¨æ€§æŒ‡æ¨™**:
- æ“ä½œç°¡ä¾¿æ€§è©•åˆ† > 4.0 / 5.0
- ä»‹é¢å‹å–„åº¦è©•åˆ† > 4.0 / 5.0
- åŠŸèƒ½å®Œæ•´åº¦è©•åˆ† > 4.0 / 5.0

**æ•ˆç‡æŒ‡æ¨™**:
- æŸ¥è©¢å®¢æˆ¶è³‡æ–™æ™‚é–“ < 30 ç§’ï¼ˆvs. æ‰‹å‹•ç¿» LINE èŠå¤©è¨˜éŒ„ 5-10 åˆ†é˜ï¼‰
- è¨­å®šå®¢æˆ¶å§“åæ™‚é–“ < 1 åˆ†é˜/äºº
- åŒ¯å‡ºè³‡æ–™æ™‚é–“ < 1 åˆ†é˜

### 13.3 æ¸¬é‡å·¥å…·

1. **æ‡‰ç”¨ç¨‹å¼ç›£æ§**
   - Render Dashboard æ—¥èªŒåˆ†æ
   - è‡ªè¨‚æ—¥èªŒè¨˜éŒ„ç³»çµ±
   - éŒ¯èª¤è¿½è¹¤ï¼ˆæœªå¯¦ä½œï¼‰

2. **è³‡æ–™åº«ç›£æ§**
   - Supabase Dashboard çµ±è¨ˆè³‡è¨Š
   - æŸ¥è©¢æ•ˆèƒ½åˆ†æ
   - Storage ä½¿ç”¨é‡è¿½è¹¤

3. **ç”¨æˆ¶å›é¥‹**
   - ä½¿ç”¨è€…è¨ªè«‡
   - åŠŸèƒ½ä½¿ç”¨çµ±è¨ˆ
   - å•é¡Œå›å ±è¿½è¹¤

---

## 14. æœªä¾†è¦åŠƒ

### 14.1 çŸ­æœŸè¨ˆåŠƒï¼ˆ1-3 å€‹æœˆï¼‰

**åŠŸèƒ½å„ªåŒ–**:
1. **å¾Œç«¯æœå°‹åŠŸèƒ½**
   - å¯¦ä½œå¾Œç«¯å…¨æ–‡æœå°‹
   - æ”¯æ´æ—¥æœŸç¯„åœç¯©é¸
   - æ”¯æ´é€²éšç¯©é¸æ¢ä»¶
   - å„ªå…ˆç´šï¼šP1

2. **èº«ä»½é©—è­‰ç³»çµ±**
   - å¢åŠ ç®¡ç†ä»‹é¢ç™»å…¥
   - åŸºæœ¬çš„å¸³è™Ÿå¯†ç¢¼é©—è­‰
   - Session ç®¡ç†
   - å„ªå…ˆç´šï¼šP1

3. **è¨Šæ¯æ¨™ç±¤åŠŸèƒ½**
   - ç‚ºè¨Šæ¯æ·»åŠ è‡ªè¨‚æ¨™ç±¤
   - æ¨™ç±¤ç®¡ç†ï¼ˆæ–°å¢ã€ç·¨è¼¯ã€åˆªé™¤ï¼‰
   - ä¾æ¨™ç±¤ç¯©é¸è¨Šæ¯
   - å„ªå…ˆç´šï¼šP2

4. **æ”¹å–„çµ±è¨ˆåŠŸèƒ½**
   - å¢åŠ æ™‚é–“è¶¨å‹¢åœ–è¡¨
   - è¨Šæ¯é¡å‹åˆ†å¸ƒåœ–
   - ç”¨æˆ¶æ´»èºåº¦çµ±è¨ˆ
   - å„ªå…ˆç´šï¼šP2

### 14.2 ä¸­æœŸè¨ˆåŠƒï¼ˆ3-6 å€‹æœˆï¼‰

**åŠŸèƒ½æ“´å±•**:
1. **å®¢æˆ¶åˆ†ç¾¤ç³»çµ±**
   - è‡ªè¨‚å®¢æˆ¶ç¾¤çµ„
   - ä¾æ¢ä»¶è‡ªå‹•åˆ†ç¾¤
   - æ‰¹é‡æ“ä½œï¼ˆæ¨™ç±¤ã€åŒ¯å‡ºï¼‰
   - å„ªå…ˆç´šï¼šP1

2. **è‡ªå‹•å›è¦†åŠŸèƒ½**
   - é—œéµå­—è‡ªå‹•å›è¦†
   - å›ºå®šè¨Šæ¯å¿«é€Ÿå›è¦†
   - å›è¦†æ¨¡æ¿ç®¡ç†
   - å„ªå…ˆç´šï¼šP1

3. **é€²éšè³‡æ–™åˆ†æ**
   - å®¢æˆ¶è¡Œç‚ºåˆ†æ
   - è¨Šæ¯ç†±é»æ™‚æ®µåˆ†æ
   - å¸¸è¦‹å•é¡Œçµ±è¨ˆ
   - å„ªå…ˆç´šï¼šP2

4. **å¤š Bot æ”¯æ´**
   - æ”¯æ´å¤šå€‹ LINE Bot å¸³è™Ÿ
   - å¸³è™Ÿåˆ‡æ›åŠŸèƒ½
   - çµ±ä¸€ç®¡ç†ä»‹é¢
   - å„ªå…ˆç´šï¼šP2

5. **æ¬Šé™ç®¡ç†ç³»çµ±**
   - è§’è‰²æ¬Šé™è¨­å®šï¼ˆç®¡ç†å“¡ã€å®¢æœï¼‰
   - æ“ä½œæ—¥èªŒè¨˜éŒ„
   - è³‡æ–™å­˜å–æ§åˆ¶
   - å„ªå…ˆç´šï¼šP1

### 14.3 é•·æœŸé¡˜æ™¯ï¼ˆ6-12 å€‹æœˆï¼‰

**ç”¢å“å‡ç´š**:
1. **AI æ™ºèƒ½åŠ©æ‰‹**
   - è‡ªå‹•åˆ†é¡è¨Šæ¯
   - æ™ºèƒ½å›è¦†å»ºè­°
   - å®¢æˆ¶æ„åœ–åˆ†æ
   - æƒ…æ„Ÿåˆ†æ

2. **CRM ç³»çµ±æ•´åˆ**
   - å®¢æˆ¶ç”Ÿå‘½é€±æœŸç®¡ç†
   - éŠ·å”®æ¼æ–—è¿½è¹¤
   - å®¢æˆ¶åƒ¹å€¼åˆ†æ
   - è¡ŒéŠ·æ´»å‹•ç®¡ç†

3. **å¤šæ¸ é“æ•´åˆ**
   - Facebook Messenger æ•´åˆ
   - Instagram DM æ•´åˆ
   - WhatsApp æ•´åˆ
   - çµ±ä¸€æ”¶ä»¶åŒ£

4. **API é–‹æ”¾**
   - RESTful API æ–‡ä»¶
   - Webhook äº‹ä»¶æ¨é€
   - ç¬¬ä¸‰æ–¹ç³»çµ±æ•´åˆ
   - API Key ç®¡ç†

5. **ä¼æ¥­ç‰ˆåŠŸèƒ½**
   - å¤šç§Ÿæˆ¶æ¶æ§‹
   - åœ˜éšŠå”ä½œåŠŸèƒ½
   - é€²éšæ¬Šé™ç®¡ç†
   - SLA ä¿è­‰

### 14.4 æŠ€è¡“å‚µå‹™æ¸…ç†

**ä»£ç¢¼å“è³ªæå‡**:
- [ ] å¢åŠ å–®å…ƒæ¸¬è©¦è¦†è“‹ç‡ï¼ˆç›®æ¨™ > 80%ï¼‰
- [ ] å¢åŠ æ•´åˆæ¸¬è©¦
- [ ] ä»£ç¢¼é‡æ§‹å’Œå„ªåŒ–
- [ ] å»ºç«‹ CI/CD æµç¨‹

**æ–‡ä»¶å®Œå–„**:
- [ ] API æ–‡ä»¶è‡ªå‹•ç”Ÿæˆï¼ˆSwagger/OpenAPIï¼‰
- [ ] é–‹ç™¼è€…æŒ‡å—
- [ ] ç”¨æˆ¶æ“ä½œæ‰‹å†Š
- [ ] æ•…éšœæ’é™¤æŒ‡å—

**å®‰å…¨æ€§åŠ å¼·**:
- [ ] å®šæœŸå®‰å…¨ç¨½æ ¸
- [ ] ä¾è³´å¥—ä»¶æ›´æ–°
- [ ] æ»²é€æ¸¬è©¦
- [ ] è³‡æ–™åŠ å¯†

---

## 15. é¢¨éšªèˆ‡æŒ‘æˆ°

### 15.1 æŠ€è¡“é¢¨éšª

**é¢¨éšª 1: LINE API è®Šæ›´**
- **æè¿°**: LINE å¯èƒ½æ›´æ–° Messaging APIï¼Œå°è‡´ç¾æœ‰æ•´åˆå¤±æ•ˆ
- **å½±éŸ¿**: é«˜
- **å¯èƒ½æ€§**: ä¸­
- **æ‡‰å°ç­–ç•¥**:
  - å®šæœŸæŸ¥çœ‹ LINE Developers å…¬å‘Š
  - ä½¿ç”¨å®˜æ–¹ SDKï¼ˆæœƒéš¨ API æ›´æ–°ï¼‰
  - å»ºç«‹ API ç‰ˆæœ¬æª¢æ¸¬æ©Ÿåˆ¶

**é¢¨éšª 2: Supabase æœå‹™ä¸­æ–·**
- **æè¿°**: Supabase å…è²»æ–¹æ¡ˆå¯èƒ½ä¸ç©©å®šæˆ–æœå‹™ä¸­æ–·
- **å½±éŸ¿**: é«˜
- **å¯èƒ½æ€§**: ä½
- **æ‡‰å°ç­–ç•¥**:
  - å®šæœŸå‚™ä»½è³‡æ–™
  - ç›£æ§æœå‹™ç‹€æ…‹
  - æº–å‚™æ›¿ä»£æ–¹æ¡ˆï¼ˆFirebase, AWSï¼‰

**é¢¨éšª 3: Render å…è²»æ–¹æ¡ˆä¼‘çœ **
- **æè¿°**: 15 åˆ†é˜ç„¡æ´»å‹•å¾Œä¼‘çœ ï¼Œç¬¬ä¸€æ¬¡è«‹æ±‚éœ€ç­‰å¾…å–šé†’
- **å½±éŸ¿**: ä¸­
- **å¯èƒ½æ€§**: é«˜
- **æ‡‰å°ç­–ç•¥**:
  - å‡ç´šè‡³ä»˜è²»æ–¹æ¡ˆï¼ˆ$7/æœˆï¼‰
  - ä½¿ç”¨ Cron Job å®šæœŸ pingï¼ˆé•å ToSï¼Œä¸å»ºè­°ï¼‰
  - å‘ç”¨æˆ¶èªªæ˜å¯èƒ½çš„å»¶é²

**é¢¨éšª 4: è³‡æ–™é‡çˆ†å¢**
- **æè¿°**: è¶…å‡ºé è¨­é™åˆ¶æˆ– Supabase å…è²»æ–¹æ¡ˆå®¹é‡
- **å½±éŸ¿**: é«˜
- **å¯èƒ½æ€§**: ä¸­
- **æ‡‰å°ç­–ç•¥**:
  - å¯¦ä½œé™åˆ¶æ©Ÿåˆ¶ï¼ˆå·²å®Œæˆï¼‰
  - ç›£æ§ä½¿ç”¨é‡ä¸¦æå‰è­¦å‘Š
  - æº–å‚™å‡ç´šæ–¹æ¡ˆ
  - å¯¦ä½œè³‡æ–™æ¸…ç†æ©Ÿåˆ¶

### 15.2 æ¥­å‹™é¢¨éšª

**é¢¨éšª 1: ç”¨æˆ¶æ¡ç”¨ç‡ä½**
- **æè¿°**: å®¢æœäººå“¡ä¸é¡˜æ„ä½¿ç”¨æ–°ç³»çµ±
- **å½±éŸ¿**: é«˜
- **å¯èƒ½æ€§**: ä¸­
- **æ‡‰å°ç­–ç•¥**:
  - æä¾›å®Œæ•´çš„æ•™è‚²è¨“ç·´
  - å¼·èª¿ç³»çµ±å¸¶ä¾†çš„æ•ˆç‡æå‡
  - æŒçºŒæ”¶é›†ç”¨æˆ¶å›é¥‹ä¸¦æ”¹å–„
  - è¨­è¨ˆç›´è§€æ˜“ç”¨çš„ä»‹é¢

**é¢¨éšª 2: å®¢æˆ¶éš±ç§ç–‘æ…®**
- **æè¿°**: å®¢æˆ¶æ“”å¿ƒè¨Šæ¯è¢«å„²å­˜å’Œä½¿ç”¨
- **å½±éŸ¿**: ä¸­
- **å¯èƒ½æ€§**: ä½
- **æ‡‰å°ç­–ç•¥**:
  - åˆ¶å®šæ˜ç¢ºçš„éš±ç§æ”¿ç­–
  - åœ¨ LINE Bot æ­¡è¿è¨Šæ¯ä¸­èªªæ˜
  - æä¾›è³‡æ–™åˆªé™¤æ©Ÿåˆ¶
  - ç¢ºä¿è³‡æ–™å®‰å…¨æ€§

**é¢¨éšª 3: åŠŸèƒ½ä¸ç¬¦éœ€æ±‚**
- **æè¿°**: å¯¦ä½œçš„åŠŸèƒ½ç„¡æ³•æ»¿è¶³å¯¦éš›æ¥­å‹™éœ€æ±‚
- **å½±éŸ¿**: ä¸­
- **å¯èƒ½æ€§**: ä¸­
- **æ‡‰å°ç­–ç•¥**:
  - æŒçºŒæ”¶é›†ç”¨æˆ¶å›é¥‹
  - å®šæœŸæª¢è¦–åŠŸèƒ½ä½¿ç”¨ç‡
  - å¿«é€Ÿè¿­ä»£å’Œæ”¹é€²
  - ä¿æŒåŠŸèƒ½å½ˆæ€§

### 15.3 æ³•å¾‹èˆ‡åˆè¦é¢¨éšª

**é¢¨éšª 1: å€‹è³‡æ³•åˆè¦**
- **æè¿°**: å°ç£å€‹è³‡æ³•è¦æ±‚é©ç•¶çš„è³‡æ–™ä¿è­·æªæ–½
- **å½±éŸ¿**: é«˜
- **å¯èƒ½æ€§**: ä¸­
- **æ‡‰å°ç­–ç•¥**:
  - è«®è©¢æ³•å¾‹é¡§å•
  - åˆ¶å®šå€‹è³‡ä¿è­·æ”¿ç­–
  - å¯¦ä½œè³‡æ–™åŠ å¯†å’Œå­˜å–æ§åˆ¶
  - æä¾›è³‡æ–™åˆªé™¤å’ŒåŒ¯å‡ºåŠŸèƒ½

**é¢¨éšª 2: LINE æœå‹™æ¢æ¬¾é•å**
- **æè¿°**: å¯èƒ½é•å LINE Messaging API æœå‹™æ¢æ¬¾
- **å½±éŸ¿**: é«˜
- **å¯èƒ½æ€§**: ä½
- **æ‡‰å°ç­–ç•¥**:
  - è©³ç´°é–±è®€ LINE Developer æ¢æ¬¾
  - ç¢ºä¿ç”¨é€”ç¬¦åˆè¦ç¯„
  - ä¸æ¿«ç”¨ APIï¼ˆé¿å…éåº¦è«‹æ±‚ï¼‰
  - å°Šé‡ç”¨æˆ¶éš±ç§

**é¢¨éšª 3: è³‡æ–™å¤–æ´©**
- **æè¿°**: ç³»çµ±è¢«é§­å®¢å…¥ä¾µï¼Œå®¢æˆ¶è³‡æ–™å¤–æ´©
- **å½±éŸ¿**: æ¥µé«˜
- **å¯èƒ½æ€§**: ä½
- **æ‡‰å°ç­–ç•¥**:
  - å¯¦ä½œèº«ä»½é©—è­‰ï¼ˆé€²è¡Œä¸­ï¼‰
  - å®šæœŸå®‰å…¨ç¨½æ ¸
  - åŠ å¯†æ•æ„Ÿè³‡æ–™
  - åˆ¶å®šè³‡æ–™å¤–æ´©æ‡‰è®Šè¨ˆåŠƒ

### 15.4 ç‡Ÿé‹é¢¨éšª

**é¢¨éšª 1: å–®é»æ•…éšœ**
- **æè¿°**: æ ¸å¿ƒæœå‹™ï¼ˆRender, Supabase, LINEï¼‰ä»»ä¸€æ•…éšœå°è‡´ç³»çµ±ç„¡æ³•ä½¿ç”¨
- **å½±éŸ¿**: é«˜
- **å¯èƒ½æ€§**: ä½
- **æ‡‰å°ç­–ç•¥**:
  - ç›£æ§æœå‹™ç‹€æ…‹
  - å»ºç«‹å‚™æ´æ–¹æ¡ˆ
  - å®šæœŸæ¸¬è©¦æ•…éšœæ¢å¾©æµç¨‹

**é¢¨éšª 2: ç¶­è­·äººåŠ›ä¸è¶³**
- **æè¿°**: ç¼ºä¹æŠ€è¡“äººå“¡ç¶­è­·å’Œæ›´æ–°ç³»çµ±
- **å½±éŸ¿**: ä¸­
- **å¯èƒ½æ€§**: ä¸­
- **æ‡‰å°ç­–ç•¥**:
  - å®Œå–„çš„æ–‡ä»¶å’Œè¨»è§£
  - æ¨¡çµ„åŒ–è¨­è¨ˆï¼Œé™ä½ç¶­è­·é›£åº¦
  - å»ºç«‹çŸ¥è­˜åº«
  - è€ƒæ…®å¤–åŒ…æŠ€è¡“æ”¯æ´

**é¢¨éšª 3: æˆæœ¬æ§åˆ¶**
- **æè¿°**: éš¨è‘—ä½¿ç”¨é‡å¢åŠ ï¼Œé›²ç«¯æœå‹™æˆæœ¬å¿«é€Ÿå¢é•·
- **å½±éŸ¿**: ä¸­
- **å¯èƒ½æ€§**: ä¸­
- **æ‡‰å°ç­–ç•¥**:
  - ç›£æ§ä½¿ç”¨é‡å’Œæˆæœ¬
  - å„ªåŒ–è³‡æºä½¿ç”¨ï¼ˆè³‡æ–™åº«æŸ¥è©¢ã€Storageï¼‰
  - å¯¦ä½œè³‡æ–™æ¸…ç†æ©Ÿåˆ¶
  - è©•ä¼°æˆæœ¬æ•ˆç›Šï¼Œé©æ™‚èª¿æ•´æ–¹æ¡ˆ

---

## é™„éŒ„

### A. è¡“èªè¡¨

| è¡“èª | èªªæ˜ |
|-----|------|
| LINE Messaging API | LINE æä¾›çš„è¨Šæ¯æ”¶ç™¼ APIï¼Œç”¨æ–¼é–‹ç™¼ LINE Bot |
| Webhook | ä¸€ç¨® HTTP å›èª¿æ©Ÿåˆ¶ï¼ŒLINE å¹³å°æœƒæ¨é€äº‹ä»¶åˆ°æŒ‡å®šçš„ URL |
| LINE Profile API | ç”¨æ–¼ç²å– LINE ç”¨æˆ¶å…¬é–‹è³‡æ–™çš„ API |
| LINE Bot API | ç”¨æ–¼ç²å–ç¾¤çµ„è³‡è¨Šã€ç™¼é€è¨Šæ¯ç­‰çš„ API |
| Supabase | é–‹æºçš„ Firebase æ›¿ä»£å“ï¼Œæä¾›è³‡æ–™åº«å’Œå„²å­˜æœå‹™ |
| Render | é›²ç«¯æ‡‰ç”¨ç¨‹å¼éƒ¨ç½²å¹³å° |
| RPC | Remote Procedure Callï¼Œé ç«¯ç¨‹åºèª¿ç”¨ï¼ŒSupabase ç”¨æ–¼åŸ·è¡Œè³‡æ–™åº«å‡½æ•¸ |
| MIME Type | å¤šç”¨é€”ç¶²éš›ç¶²è·¯éƒµä»¶æ“´å±•é¡å‹ï¼Œç”¨æ–¼æ¨™è­˜æª”æ¡ˆé¡å‹ |
| JWT | JSON Web Tokenï¼Œä¸€ç¨®èº«ä»½é©—è­‰ä»¤ç‰Œæ ¼å¼ |
| REST API | è¡¨ç¾å±¤ç‹€æ…‹è½‰æ›æ‡‰ç”¨ç¨‹å¼ä»‹é¢ï¼Œä¸€ç¨® API è¨­è¨ˆé¢¨æ ¼ |

### B. åƒè€ƒè³‡æ–™

**å®˜æ–¹æ–‡ä»¶**:
- [LINE Messaging API æ–‡ä»¶](https://developers.line.biz/en/docs/messaging-api/)
- [Supabase æ–‡ä»¶](https://supabase.com/docs)
- [Render æ–‡ä»¶](https://render.com/docs)
- [Express.js æ–‡ä»¶](https://expressjs.com/)

**å°ˆæ¡ˆæ–‡ä»¶**:
- `CLAUDE.md` - å°ˆæ¡ˆæ¦‚è¿°èˆ‡é–‹ç™¼æŒ‡å—
- `DEPLOY.md` - éƒ¨ç½²èªªæ˜
- `SETUP.md` - Git è¨­å®šæŒ‡å¼•
- `RESET_DATA_GUIDE.md` - è³‡æ–™é‡ç½®æŒ‡å—
- `GROUP_NAME_COMPLETENESS_REPORT.md` - ç¾¤çµ„åç¨±åŠŸèƒ½å ±å‘Š
- `LINE_CONTACT_NAME_SOLUTION.md` - è¯çµ¡äººå§“åè§£æ±ºæ–¹æ¡ˆ
- `LINE_PROFILE_API_ANALYSIS.md` - LINE Profile API åˆ†æ

### C. ç‰ˆæœ¬æ­·å²

| ç‰ˆæœ¬ | æ—¥æœŸ | è®Šæ›´èªªæ˜ |
|-----|------|---------|
| 1.0 | 2025-11-05 | åˆå§‹ç‰ˆæœ¬ï¼ŒåŸºæ–¼ç›®å‰å¯¦ä½œç‹€æ…‹æ’°å¯« PRD |

### D. è²¢ç»è€…

- **ç”¢å“è¨­è¨ˆ**: [æ‚¨çš„åå­—]
- **æŠ€è¡“å¯¦ä½œ**: [æ‚¨çš„åå­—]
- **æ–‡ä»¶æ’°å¯«**: Claude Codeï¼ˆAI è¼”åŠ©ï¼‰

---

**æ–‡ä»¶çµæŸ**

å¦‚æœ‰ä»»ä½•å•é¡Œæˆ–å»ºè­°ï¼Œè«‹é€éä»¥ä¸‹æ–¹å¼è¯ç¹«ï¼š
- GitHub Issues: [å°ˆæ¡ˆ Repository]
- Email: [è¯çµ¡ä¿¡ç®±]
